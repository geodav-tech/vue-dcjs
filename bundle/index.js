/*!
 * vue-dcjs v0.1.13
 * (c) 
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("dc"),e=require("d3"),r=require("crossfilter2");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var o=i(t),a=i(e),c=n(r);function s(t,e,r,n,i,o,a){try{var c=t[o](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,i)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,c,"next",t)}function c(t){s(o,n,i,a,c,"throw",t)}a(void 0)}))}}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){c=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw i}}return o}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){if(t){if("string"==typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var k=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&p(t,e)}(c,t.CapMixin(t.ColorMixin(t.MarginMixin)));var n,i,o,a=v(c);function c(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),d(f(n=a.call(this,t,r)),"_g",void 0),d(f(n),"_scale",void 0),d(f(n),"_elastic",void 0),d(f(n),"_type","axisBottom"),d(f(n),"_theAxis",e.axisBottom()),d(f(n),"_axisData",void 0),d(f(n),"validAxisTypes",["axisBottom","axisTop","axisLeft","axisRight"]),d(f(n),"axisCap",void 0),n._minHeight=0,n._defaultHeightCalc=function(t){return 24},n.anchor(t,r),n}return n=c,(i=[{key:"calculateAxisScale",value:function(){var t=this;if(!this._scale||this._elastic){var r=e.extent(this._axisData,(function(e,r){return t.cappedValueAccessor(e,r)}));r[0]>0&&(r[0]=0),r[1]<0&&(r[1]=0),this._scale=e.scaleLinear().domain(r).range([0,"axisBottom"===this._type||"axisTop"===this._type?this.effectiveWidth():this.effectiveHeight()])}this._theAxis.scale(this._scale)}},{key:"drawAxis",value:function(){var e=this._g.select("g.axis");this.calculateAxisScale(),e.empty()&&(e=this._g.append("g").attr("class","axis")),t.transition(e,this.transitionDuration(),this.transitionDelay()).call(this._theAxis)}},{key:"_doRender",value:function(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate(".concat(this.margins().left,", ").concat(this.margins().top,")")),this.drawChart(),this}},{key:"type",value:function(t){return arguments.length?(-1!==this.validAxisTypes.indexOf(t)?(this._theAxis=d3[t](),this._type=t):console.error(t+" is not a valid d3 axis type"),this):this._type}},{key:"scale",value:function(t){return arguments.length?(this._scale=t,this):this._scale}},{key:"elastic",value:function(t){return arguments.length?(this._elastic=t,this):this._elastic}},{key:"axis",value:function(){return this._theAxis}},{key:"drawChart",value:function(){this._axisData=this.data(),this.drawAxis()}},{key:"_doRedraw",value:function(){return this.drawChart(),this}}])&&l(n.prototype,i),o&&l(n,o),Object.defineProperty(n,"prototype",{writable:!1}),c}();require("dc/dist/style/dc.min.css");Object.assign(o,{AxisChart:k,renderAllNoTransitions:function(){o.chartRegistry.list().forEach((function(t){var e=t.transitionDuration();t.transitionDuration(0),t.render(),t.transitionDuration(e)}))}});var C={useWindowResize:!0,resizeTimeout:100,useResetListener:!0,resetSelector:function(t){var e;return(null===(e=document.querySelector(t.anchor()).closest(".example-container"))||void 0===e?void 0:e.querySelectorAll(".example-reset-button"))||[]}},w=Object.assign({},C),O={install:function(t,e){var r=Object.assign({},C,e);if(function(t){w=t}(r),null!=r&&r.defaultColors&&o.config.defaultColors(r.defaultColors),t.prototype.$dc=o,t.prototype.$d3=a,t.prototype.$crossfilter=c.default,r.useWindowResize){var n=null,i=window.innerWidth;window.addEventListener("resize",(function(){n&&clearTimeout(n),i!==window.innerWidth&&(n=setTimeout((function(){o.renderAllNoTransitions(),n=null,i=window.innerWidth}),r.resizeTimeout))}))}}};var _=function(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}((function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),a=new w(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return _()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var c=b(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,a),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l={};function d(){}function h(){}function p(){}var f={};c(f,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(O([])));v&&v!==e&&r.call(v,i)&&(f=v);var g=p.prototype=d.prototype=Object.create(f);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var n;this._invoke=function(i,o){function a(){return new e((function(n,a){!function n(i,o,a,c){var s=u(t[i],t,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=p,c(g,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(x.prototype),c(x.prototype,o,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new x(s(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),c(g,a,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})),A={props:{axisOptions:{type:Object}},methods:{applyAxisOptions:function(){var t,e,r,n,i=this,o=this.computedAxisOptions.x,a=this.computedAxisOptions.y;if(this.chart&&(o||a)){var c=null===(t=(e=this.chart).xAxis)||void 0===t?void 0:t.call(e),s=null===(r=(n=this.chart).yAxis)||void 0===r?void 0:r.call(n),u=function(t,e){(e||0===e)&&t.ticks(e)},l=function(t,e){"string"==typeof e?t.tickFormat(i.$d3.format(e)):"number"==typeof e?t.tickFormat=i.$d3.format(",.".concat(e,"f")):"function"==typeof e&&t.tickFormat(e)},d=function(t,e){e&&Array.isArray(e)&&t.tickValues(e)},h=function(t,e){(e||0===e)&&t.tickSize(e)};o&&c&&(u(c,o.ticks),l(c,o.format),d(c,o.values),h(c,o.size),o.tilt&&this.$d3.select(this.chart.anchor()).classed("tilted-x-axis",!0),o.x&&"function"==typeof this.chart.x&&this.chart.x(o.x(this.$options.dimension))),a&&s&&(u(s,a.ticks),l(s,a.format),d(s,a.values),h(s,a.size),a.y&&"function"==typeof this.chart.y&&this.chart.y(a.y(this.$options.dimension)))}}},computed:{computedAxisOptions:function(){var t,e,r,n;return{x:Object.assign({},null===(t=this.computedOptions)||void 0===t?void 0:t.xAxis,null===(e=this.axisOptions)||void 0===e?void 0:e.x),y:Object.assign({},null===(r=this.computedOptions)||void 0===r?void 0:r.yAxis,null===(n=this.axisOptions)||void 0===n?void 0:n.y)}}}};function $(t,e,r,n,i,o,a,c,s,u){"boolean"!=typeof a&&(s=c,c=a,a=!1);const l="function"==typeof r?r.options:r;let d;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),n&&(l._scopeId=n),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,s(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=d):e&&(d=a?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,c(t))}),d)if(l.functional){const t=l.render;l.render=function(e,r){return d.call(r),t(e,r)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,d):[d]}return r}const S="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function F(t){return(t,e)=>function(t,e){const r=S?e.media||"default":t,n=E[r]||(E[r]={ids:new Set,styles:[]});if(!n.ids.has(t)){n.ids.add(t);let r=e.source;if(e.map&&(r+="\n/*# sourceURL="+e.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",e.media&&n.element.setAttribute("media",e.media),void 0===L&&(L=document.head||document.getElementsByTagName("head")[0]),L.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(r),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{const t=n.ids.size-1,e=document.createTextNode(r),i=n.element.childNodes;i[t]&&n.element.removeChild(i[t]),i.length?n.element.insertBefore(e,i[t]):n.element.appendChild(e)}}}(t,e)}let L;const E={};var D=$({},(function(t){t&&t("data-v-2edc5f24_0",{source:".dc-chart.tilted-x-axis .axis.x .tick text{text-anchor:end;transform:rotate(-33deg) translate(-4px,-2px)}",map:void 0,media:void 0})}),A,void 0,void 0,void 0,!1,F,void 0,void 0);function R(t){return"function"==typeof t?t:function(e){return e[t]}}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(e,Math.min(t,r))}var T=$({},(function(t){t&&t("data-v-696dd25a_0",{source:".dc-reset-is-hidden{display:none!important}",map:void 0,media:void 0})}),{name:"BaseChartMixin",dimension:null,myName:"baseChart",props:{ndx:{type:Object,required:!0},name:{type:String},options:{type:Object}},baseDefaultOptions:{disposeDimension:!0,render:!0},data:function(){return{chart:null,resetButtonFunction:null,resetButtons:[]}},mounted:function(){this.drawChart()},methods:{reset:function(){this.chart&&this.chart.filter(null)},drawChart:function(){var t=this;return u(_.mark((function e(){return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createChart();case 2:t.addChartExtras(),t.callOnCreate(),t.computedOptions.onFilter&&t.chart.on("filtered",t.computedOptions.onFilter),t.computedOptions.onClick&&t.chart.on("click",t.computedOptions.onClick),w.useResetListener&&"function"==typeof w.resetSelector&&t.setupResetListener(),t.computedOptions.render&&t.renderChart();case 8:case"end":return e.stop()}}),e)})))()},createChart:function(){var t=this.computedOptions,e=t.valueAccessor,r=t.margins,n=t.keyAccessor,i=t.title,o=t.label,a=t.height,c=t.width;e&&this.chart.valueAccessor(R(e)),r&&this.chart.margins&&this.chart.margins(this.computedMargins),n&&this.chart.keyAccessor(R(n)),i&&this.chart.title(R(i)),o&&this.chart.label(R(o)),a&&this.chart.height(a),c&&this.chart.width(c)},onResetButtonClick:function(){},renderChart:function(){var t=this;return new Promise((function(e){t.$emit("pre-render",t.chart),t.$nextTick((function(){t.render(),t.$nextTick((function(){return t.$emit("post-render",t.chart),e(t.chart)}))}))}))},render:function(){this.chart.render()},addChartExtras:function(){(this.name||this.computedOptions.name)&&(this.chart.name=this.name||this.computedOptions.name),this.chart.vueOptions=this.computedOptions},callOnCreate:function(){var t,e;null===(t=this.computedOptions)||void 0===t||null===(e=t.onCreate)||void 0===e||e.call(t,this.chart),this.$emit("create",this.chart)},setupResetListener:function(){var t,e=this,r=null!==(t=this.chart)&&void 0!==t&&t.children?[this.chart].concat(y(this.chart.children())):[this.chart];try{var n=w.resetSelector;this.resetButtons=r.reduce((function(t,e){var r=n(e);return"function"!=typeof r.forEach?t.push(r):r.forEach((function(e){t.push(e)})),t}),[]),this.resetButtonFunction=function(){r.forEach((function(t){t.filterAll()})),e.$dc.redrawAll()},this.resetButtons.forEach((function(t){t.addEventListener("click",e.resetButtonFunction)}));var i=function(){var t=r.some((function(t){return t.hasFilter()}));e.resetButtons.forEach((function(e){t?e.classList.remove("dc-reset-is-hidden"):e.classList.add("dc-reset-is-hidden")}))};r.forEach((function(t){t.on("filtered.reset",i)})),i()}catch(t){console.error("Could not attach reset listener using resetSelector",t)}}},computed:{computedMargins:function(){if("number"==typeof this.computedOptions.margins){var t=this.computedOptions.margins;return{top:t,left:t,right:t,bottom:t}}var e,r;return Object.assign({top:30,right:30,bottom:30,left:30},null===(e=this.$options.defaultOptions)||void 0===e?void 0:e.margins,null===(r=this.options)||void 0===r?void 0:r.margins)},computedOptions:function(){return Object.assign({},this.$options.baseDefaultOptions,this.$options.defaultOptions,this.options)}},beforeDestroy:function(){if(this.chart){var t=this.chart.dimension();t&&t.filterAll(),this.$dc.chartRegistry.deregister(this.chart)}this.computedOptions.disposeDimension&&this.$options.dimension&&this.$options.dimension.dispose()}},void 0,void 0,void 0,!1,F,void 0,void 0),N=$({},void 0,{name:"DimensionMixin",props:{dimensionConstructor:{type:[String,Function]},dimensionIsArray:{type:Boolean,default:!1}},methods:{createDimension:function(){var t=function(t){return t};return"string"==typeof this.dimensionConstructor?t=this.$dc.pluck(this.dimensionConstructor):"function"==typeof this.dimensionConstructor&&(t=this.dimensionConstructor),this.ndx.dimension(t,this.dimensionIsArray)}}},void 0,void 0,void 0,!1,void 0,void 0,void 0),P=$({},void 0,{name:"GroupMixin",props:{reducer:{type:[String,Function,Object]},groupOptions:{type:Object}},methods:{createGroup:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r?t.groupAll():t.group();if(this.groupOptions&&this.groupOptions.order?"string"==typeof this.groupOptions.order?n.order((function(t){return t[e.groupOptions.order]})):"function"==typeof this.groupOptions.order&&n.order(this.groupOptions.order):this.groupOptions&&this.groupOptions.orderNatural&&n.orderNatural(),"string"==typeof this.reducer||"function"==typeof this.reducer)n.reduceSum(R(this.reducer));else if(this.reducer.add&&this.reducer.remove&&this.reducer.init){var i=this.reducer,o=i.add,a=i.remove,c=i.init;n.reduce(o,a,c)}return new Promise((function(t,r){var i=setTimeout((function(){return t(n)}));e.$emit("group-created",n,(function(e){return clearTimeout(i),t(e)}))}))},ordinalToLinear:function(t,e){var r,n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{top:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return i?Object.entries(t.value()).map((function(t){var e=g(t,2);return{key:e[0],value:e[1]}})).sort((function(t,r){return e(r.value)-e(t.value)})).slice(0,r):t.order((function(t){return e(t)})).top(r)},all:function(){var o=[];return o=i?Object.entries(t.value()).map((function(t){var e=g(t,2);return{key:e[0],value:e[1]}})).sort((function(t,r){return e(r.value)-e(t.value)})):t.order((function(t){return e(t)})).top(1/0),r={},n=[],o.forEach((function(t,e){r[t.key]=e,n[e]=t.key})),o},ord2int:function(t){return r||this.all(),r[t]},int2ord:function(t){return n||this.all(),n[t]}}}}},void 0,void 0,void 0,!1,void 0,void 0,void 0),M=$({},void 0,{props:{legend:{type:Boolean},legendOptions:{type:Object}},methods:{applyLegendOptions:function(){if(this.computedOptions.showLegend||this.computedOptions.legend||this.legend){var t=this.$dc.legend(),e=this.computedLegendOptions,r=e.autoWidth,n=e.gap,i=e.highlightSelected,o=e.horizontal,a=e.itemHeight,c=e.itemWidth,s=e.keyboardAccessible,u=e.legendText,l=e.legendWidth,d=e.maxItems,h=e.x,p=e.y;void 0!==r?t.autoItemWidth(r):void 0!==c&&t.itemWidth(c),void 0!==n&&t.gap(n),void 0!==i&&t.highlightSelected(i),void 0!==o&&t.horizontal(o),void 0!==a&&t.itemHeight(a),void 0!==s&&t.keyboardAccessible(s),void 0!==u&&t.legendText(u),void 0!==l&&t.legendWidth(l),void 0!==d&&t.maxItems(d),void 0!==h&&t.x(h),void 0!==p&&t.y(p),this.chart.legend(t)}}},computed:{computedLegendOptions:function(){var t,e;return Object.assign({},null===(t=this.defaultOptions)||void 0===t?void 0:t.legendOptions,null===(e=this.options)||void 0===e?void 0:e.legendOptions,this.legendOptions)}}},void 0,void 0,void 0,!1,void 0,void 0,void 0),B=$({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dc-chart-container dc-scroll-bar-chart-container"},[t.computedOptions.scrollable?r("div",{staticStyle:{position:"relative","z-index":"0"}},[r("div",{staticClass:"dc-scroll-bar-range",class:{hidden:!t.canScroll},attrs:{id:"chart-"+t._uid+"-range"}}),t._v(" "),r("div",{staticClass:"dc-scroll-bar-range-filler",class:{hidden:t.canScroll}})]):t._e(),t._v(" "),r("div",{staticClass:"dc-chart dc-bar-chart",attrs:{id:"chart-"+t._uid}})])},staticRenderFns:[]},(function(t){t&&t("data-v-c159aca8_0",{source:".dc-chart-container.dc-scroll-bar-chart-container{position:relative;z-index:0}.dc-scroll-bar-chart-container .dc-scroll-bar-range .axis,.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler .axis,.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler.hidden,.dc-scroll-bar-chart-container .dc-scroll-bar-range.hidden{display:none}.dc-scroll-bar-chart-container .dc-scroll-bar-range{z-index:1;position:relative}.dc-scroll-bar-chart-container .dc-scroll-bar-range .custom-brush-handle{cursor:ew-resize;stroke:#000}.dc-scroll-bar-chart-container .dc-scroll-bar-range g.brush{fill:rgba(100,100,100,.1)}.dc-scroll-bar-chart-container .dc-scroll-bar-range svg{display:block}.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler{height:12px}",map:void 0,media:void 0})}),{name:"DcBarChart",mixins:[T,N,P,D],defaultOptions:{elastic:!0,scrollable:!1,minScrollable:12,scrollHeight:12,mouseZoom:!0},data:function(){return{scaleChart:null,top:0,hasReplacedRenderFunc:!1}},methods:{createChart:function(){var t=this;return u(_.mark((function e(){var r,n,i,o,a,c,s,u,l,d,h,p,f,m,v,g,y,x,b,k,C,w,O,A,$,S;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hasReplacedRenderFunc=!1,n=t.computedOptions,i=n.elastic,o=n.minScrollable,a=n.scrollHeight,c=n.groupAll,s=n.valueAccessor,u=n.filterFunction,l=n.mouseZoom,d=n.barPadding,h=n.barGap,p=n.outerBarPadding,t.$options.dimension=t.createDimension(),f=R(s||function(t){return t}),e.t0=t,e.next=7,t.createGroup(t.$options.dimension,c);case 7:e.t1=e.sent,e.t2=f,e.t3=c,m=e.t0.ordinalToLinear.call(e.t0,e.t1,e.t2,e.t3),t.top=m.all().length,v=[-.52,t.top-.5],g=t.top?document.querySelector("#chart-".concat(t._uid)).clientWidth/o/t.top:0,g=Math.max(Math.ceil(g),1),t.chart=new t.$dc.BarChart("#chart-".concat(t._uid)).dimension(t.$options.dimension).group(m).x(t.$d3.scaleLinear().domain(v)).xUnits(t.$dc.units.integers).centerBar(!0).brushOn(!1).gap(g).title((function(t){return"".concat(t.key,": ").concat(f(t.value))})),t.$super(T).createChart(),t.applyAxisOptions(),t.chart.keyAccessor((function(t){return m.ord2int(t.key)})),t.chart.valueAccessor((function(t){return f(t.value)})),t.chart.title(t.titleAccessor),t.chart.transitionDuration(t.canScroll?50:250),i&&t.chart.elasticY(!0),y=R((null===(r=t.computedAxisOptions.x)||void 0===r?void 0:r.format)||function(t){return t}),t.chart.xAxis().tickFormat((function(t){return y(m.int2ord(t))})).ticks(t.top),t.top<=o/4&&(x=t.top||1,t.chart.barPadding(o/2/x)),b=[],t.chart.filterHandler((function(t,e){})),t.chart.hasFilter=function(t){return Array.isArray(t)?t.every((function(t){return b.includes(t)})):t?b.includes(t):b.length},t.chart.applyFilter=function(){b.length?this.dimension().filterFunction((function(t){return u?u(b,t):b.includes(t)})):this.dimension().filter(null),this._listeners.call("filtered",this,this,b)},t.chart.filterAll=function(){b=[],this.applyFilter()},k=t.$dc,C=t.$d3,t.chart.fadeDeselectedArea=function(t){var e=this.chartBodyG().selectAll("rect.bar");b.length?(e.classed(k.constants.SELECTED_CLASS,(function(t){return b.includes(t.data.key)})),e.classed(k.constants.DESELECTED_CLASS,(function(t){return!b.includes(t.data.key)}))):(e.classed(k.constants.SELECTED_CLASS,!1),e.classed(k.constants.DESELECTED_CLASS,!1))},t.chart.on("pretransition.vue-dcjs",(function(t){t.selectAll("rect.bar").on("click.ordinal-select",(function(e,r){var n=b.indexOf(r.data.key);n>=0?b.splice(n,1):b.push(r.data.key),t.applyFilter(),t.redrawGroup()}))})),t.chart.on("preRedraw.vue-dcjs",(function(t){var e=t.x().domain(),r=Math.ceil(e[0]),n=Math.floor(e[1]);t.xAxis().tickValues(C.range(r,n+1)),t.rescale()})),void 0!==d?t.chart.barPadding(d):void 0!==h&&t.chart.gap(h),void 0!==p&&t.chart.outerPadding(p),t.canScroll&&(w=t.computedMargins,O=w.top,A=w.bottom,$=w.left,S=w.right,t.chart.margins({top:0,bottom:A,left:$,right:S}),t.chart._invokeFilteredListener=function(t){if(void 0!==t&&"RangedFilter"!==t.filterType)return this._listeners.call("filtered",this,this,t)},t.scaleChart=new t.$dc.BarChart("#chart-".concat(t._uid,"-range")).dimension(t.$options.dimension).group(m).height(a+O).margins({left:$,top:O,right:S,bottom:2}).x(t.$d3.scaleLinear().domain(v)).xUnits(t.$dc.units.integers).keyAccessor((function(t){return m.ord2int(t.key)})).centerBar(!0).valueAccessor((function(t){return f(t.value)})).brushOn(!0).transitionDuration(0).gap(1),t.scaleChart.filterHandler((function(){})),t.scaleChart.yAxis().ticks(0),t.scaleChart.xAxis().ticks(0),t.chart.rangeChart(t.scaleChart),t.chart.zoomScale([Math.min(8,Math.ceil(t.top/12)),Math.min(t.top,12)]),i&&t.scaleChart.elasticY(!0),l&&t.chart.mouseZoomable(t.canScroll));case 39:case"end":return e.stop()}}),e)})))()},render:function(){if(this.$super(T).render(),this.canScroll){var t;this.hasReplacedRenderFunc||(this.chart._doRender=function(){return this.resetSvg(),this._preprocessData(),this._generateG(),this._generateClipPath(),this._drawChart(!0),this},this.hasReplacedRenderFunc=!0),null===(t=this.scaleChart)||void 0===t||t.render();var e=Math.floor(this.top/Math.min(8,Math.ceil(this.top/12)));this.chart.focus([-1,e])}},callOnCreate:function(){var t,e;null===(t=this.computedOptions)||void 0===t||null===(e=t.onCreate)||void 0===e||e.call(t,this.chart,this.scaleChart),this.$emit("create",this.chart,this.scaleChart)}},computed:{canScroll:function(){return this.computedOptions.scrollable&&this.top>=this.computedOptions.minScrollable}}},void 0,!1,void 0,!1,F,void 0,void 0),I=$({render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dc-check-list-container",style:t.computedStyle},[t._t("search",(function(){return[r("div",{staticClass:"dc-search-input-container"},[r("label",{staticClass:"dc-search-input-label",attrs:{for:".dc-search-input"}},[t._v("Search")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.groupFilter,expression:"groupFilter"}],staticClass:"dc-search-input",domProps:{value:t.groupFilter},on:{input:[function(e){e.target.composing||(t.groupFilter=e.target.value)},t.updateSearch]}})])]})),t._v(" "),r("div",{staticClass:"dc-checkbox-container"},t._l(t.shownGroups,(function(e){return r("div",{key:e.key,staticClass:"dc-checkbox",on:{click:function(r){return t.toggleFilterFor(e.key)}}},[t._t("option",(function(){return[r("span",{staticClass:"dc-option-box",class:{selected:t.inFilter.includes(e.key)}}),t._v(" "),r("span",{staticClass:"dc-option-label",class:{selected:t.inFilter.includes(e.key)}},[t._v("\n          "+t._s(e.key)+" ("+t._s(t._f("formatFilter")(e.value,t.computedDigits))+")\n        ")])]}),{option:e,value:t.inFilter.includes(e.key)})],2)})),0)],2)},staticRenderFns:[]},(function(t){t&&t("data-v-edd2d132_0",{source:".dc-check-list-container{text-align:left;width:100%}.dc-check-list-container .dc-search-input-container .dc-search-input-label{display:block;font-weight:700;font-size:.85rem;margin-bottom:-.25rem}.dc-check-list-container .dc-search-input-container .dc-search-input{border-radius:.25rem;padding:.25rem;width:calc(100% - 1.25rem);border-color:#000}.dc-check-list-container .dc-checkbox-container .dc-checkbox{display:flex;align-items:center;cursor:pointer}.dc-check-list-container .dc-checkbox-container .dc-checkbox:nth-child(2n){background-color:#f5f5f5}.dc-check-list-container .dc-checkbox-container .dc-checkbox .dc-option-box{display:inline-block;width:1rem;height:1rem;border-radius:.25rem;margin:.25rem;border:2px solid #000}.dc-check-list-container .dc-checkbox-container .dc-checkbox .dc-option-box.selected{background-color:#388ce6}.dc-check-list-container .dc-checkbox-container .dc-checkbox:hover .dc-option-box{background-color:rgba(56,140,230,.25)}.dc-check-list-container .dc-checkbox-container .dc-checkbox:hover .dc-option-box.selected{background-color:rgba(56,140,230,.75)}",map:void 0,media:void 0})}),{name:"DcChecklist",props:{chart:{type:[String,Object],required:!0},searchable:{type:Boolean,default:!0},search:{type:String,default:""},othersLimit:{type:Number},digits:{type:Number},maxHeight:{type:[String,Number],default:null},othersLabel:{type:String}},data:function(){return{groupFilter:"",groups:[],others:[],inFilter:[],waitInterval:null,waitingTimer:1}},mounted:function(){this.dcChart?this.reset():this.waitForChartInit(!0)},watch:{dcChart:function(t,e){this.reset()},search:function(){this.search!=this.groupFilter&&(this.groupFilter=this.search)}},filters:{formatFilter:function(t,e){return e||0===e?t.toFixed(e):t}},methods:{reset:function(){this.resetFilters(),this.updateListValues(),this.watchChartChanges()},resetFilters:function(){var t;this.inFilter=Array.from(new Set((t=this.dcChart.filters(),Array.isArray(t)?t.reduce((function(t,e){return t.concat(e)}),[]):[]))),this.groupFilter=""},updateListValues:function(){var t=this;this.groups=JSON.parse(JSON.stringify(this.dcChart.group().order((function(e){return t.valueAccessor({value:e})})).top(1/0))),this.options.slicesCap||this.othersLimit?this.others=this.groups.slice(this.options.slicesCap||this.othersLimit).map((function(t){return t.key})):this.others=[]},checkOthersFilterToggled:function(){var t=this,e=this.dcChart.filters(),r=this.othersLabel||this.options.othersLabel||"others",n=this.others.filter((function(r){return!e.includes(r)&&t.inFilter.includes(r)}));e.includes(r)&&n.length&&(e.push.apply(e,y(n)),this.inFilter=e,this.dcChart.replaceFilter([e]))},toggleFilterFor:function(t){var e=this;this.inFilter.includes(t)?this.inFilter=this.inFilter.filter((function(e){return e!==t})):this.inFilter.push(t),this.dcChart.replaceFilter([this.inFilter]),this.$nextTick((function(){return e.$dc.redrawAll()}))},updateSearch:function(){this.$emit("update:search",this.groupFilter),this.$emit("update-search",this.groupFilter)},watchChartChanges:function(){var t=this;this.dcChart.on("renderlet.checklist",(function(){t.updateListValues()})),this.dcChart.on("filtered.checklist",(function(){t.$nextTick((function(){t.checkOthersFilterToggled(),t.resetFilters(),t.updateListValues()}))}))},waitForChartInit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.waitInterval=setInterval((function(){t.waitingTimer=(t.waitingTimer+1)%100+1,t.$nextTick((function(){t.dcChart&&(t.reset(),clearInterval(t.waitInterval),t.waitInterval=null)}))}),e?50:300)}},computed:{dcChart:function(){var t=this;return"string"==typeof this.chart&&this.waitingTimer?this.$dc.chartRegistry.list().find((function(e){return e.name===t.chart})):this.chart},shownGroups:function(){var t=this;return this.groupFilter&&this.groupFilter.length?this.groups.filter((function(e){return new RegExp(t.groupFilter,"gi").test(e.key)})):this.groups},valueAccessor:function(){return R(this.options.valueAccessor||function(t){return t.value})},computedDigits:function(){return this.digits||0===this.digits?this.digits:this.options.digits},computedStyle:function(){var t=[];return this.maxHeight&&(t.push("overflow-y: auto"),"number"==typeof this.maxHeight?t.push("max-height: ".concat(this.maxHeight,"px")):t.push("max-height: ".concat(this.maxHeight))),t.join("; ")},options:function(){var t;return(null===(t=this.dcChart)||void 0===t?void 0:t.vueOptions)||{}}},beforeDestroy:function(){this.waitInterval&&clearInterval(this.waitInterval)}},void 0,!1,void 0,!1,F,void 0,void 0),H=$({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dc-chart-container dc-composite-line-container"},[e("div",{staticClass:"dc-chart dc-composite-line-chart",attrs:{id:"chart-"+this._uid}})])},staticRenderFns:[]},void 0,{name:"DcCompositeLineChart",mixins:[T,N,P,D,M],defaultOptions:{elastic:!0,showLegend:!0,legendOptions:{x:50}},props:{groups:{type:Array,required:!0}},data:function(){return{groupCharts:[]}},watch:{groups:function(){console.log("group change",this.groups)}},methods:{createChart:function(){var t=this;return u(_.mark((function e(){var r,n,i,o,a,c,s,u,l;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$options.dimension=t.createDimension(),e.next=3,t.createGroup(t.$options.dimension);case 3:n=e.sent,i=t.computedOptions,o=i.elastic,a=i.keyAccessor,c=i.renderArea,t.chart=new t.$dc.CompositeChart("#chart-".concat(t._uid)).dimension(t.$options.dimension),t.$super(T).createChart(),t.applyAxisOptions(),o&&t.chart.elasticY(!0),null!==(r=t.computedAxisOptions.x)&&void 0!==r&&r.x||(s=R(t.computedOptions.keyAccessor||function(t){return t.key}),u=s(t.$options.dimension.top(1)[0]),l=s(t.$options.dimension.bottom(1)[0]),t.chart.x(t.$d3.scaleLinear().domain([l,u]))),t.groupCharts=t.groups.map((function(e){var r=new t.$dc.LineChart(t.chart).group(n,e.name).valueAccessor(R(e.valueAccessor||function(t){return t.value})).keyAccessor(R(a||function(t){return t.key}));return(c||e.renderArea)&&r.renderArea(!0),e.color&&r.colors(e.color),r})),t.chart.compose(t.groupCharts),t.applyLegendOptions();case 13:case"end":return e.stop()}}),e)})))()},callOnCreate:function(){var t,e;null===(t=this.computedOptions)||void 0===t||null===(e=t.onCreate)||void 0===e||e.call(t,this.chart,this.groupCharts),this.$emit("create",this.chart,this.groupCharts)}}},void 0,!1,void 0,!1,void 0,void 0,void 0),G=$({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dc-chart-container dc-date-chart-container"},[e("div",{staticClass:"dc-chart dc-date-chart",attrs:{id:"chart-"+this._uid}})])},staticRenderFns:[]},void 0,{name:"DcDateChart",mixins:[T,N,P,D],defaultOptions:{elastic:!0,renderArea:!0,limitTicksToNumDays:!0,useD3TimeDay:!0,snapDateCalculation:!1,useUtcSnapping:!1},methods:{getDateBounds:function(){var t=R(this.computedOptions.keyAccessor||function(t){return t.date}),e=new Date(t(this.$options.dimension.top(1)[0])),r=new Date(t(this.$options.dimension.bottom(1)[0])),n=this.computedOptions,i=n.snapDateCalculation,o=n.useUtcSnapping;return i&&(o?(e.setUTCHours(0,0,0,0),r.setUTCHours(23,59,59,999)):(e.setHours(0,0,0,0),r.setHours(23,59,59,999))),{top:e,bottom:r,days:Math.ceil(Math.abs(this.daysDifference(e,r)))}},daysDifference:function(t,e){return t&&e&&t.getTime&&e.getTime?(e.getTime()-t.getTime())/1e3/60/60/24:null},createDimension:function(){var t=this,e=this.computedOptions.useD3TimeDay,r=function(e){return t.$d3.timeDay(new Date(e))},n=e?function(e){return r(t.$dc.pluck("date")(e))}:dc.pluck("date");return"string"==typeof this.dimensionConstructor?n=e?function(e){return r(t.$dc.pluck(t.dimensionConstructor)(e))}:dc.pluck(this.dimensionConstructor):"function"==typeof this.dimensionConstructor&&(n=this.dimensionConstructor),this.ndx.dimension(n,this.dimensionIsArray)},createChart:function(){var t=this;return u(_.mark((function e(){var r,n,i,o,a,c,s,u,l,d;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.computedOptions,n=r.elastic,i=r.renderArea,t.$options.dimension=t.createDimension(),e.next=4,t.createGroup(t.$options.dimension);case 4:o=e.sent,a=t.getDateBounds(),c=a.top,s=a.bottom,u=a.days,t.chart=new t.$dc.LineChart("#chart-".concat(t._uid)).dimension(t.$options.dimension).group(o).x(t.$d3.scaleTime().domain([s,c])),t.$super(T).createChart(),t.applyAxisOptions(),n&&t.chart.elasticY(!0),i&&t.chart.renderArea(!0),t.computedOptions.limitTicksToNumDays&&(d=(null===(l=t.computedAxisOptions.x)||void 0===l?void 0:l.ticks)||10,t.chart.xAxis().ticks(Math.min(d,u)));case 12:case"end":return e.stop()}}),e)})))()}}},void 0,!1,void 0,!1,void 0,void 0,void 0),z=$({render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"dc-number-display",attrs:{id:"chart-"+this._uid}})},staticRenderFns:[]},void 0,{name:"DcNumberDisplay",mixins:[T,P],methods:{createChart:function(){var t=this;return u(_.mark((function e(){var r,n,i,o,a,c,s,u,l;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createGroup(t.ndx,!0);case 2:r=e.sent,t.chart=new t.$dc.NumberDisplay("#chart-".concat(t._uid)).group(r),t.chart.anchorName=function(){return"#chart-".concat(t._uid)},t.$super(T).createChart(),n=t.computedOptions,i=n.html,o=n.singular,a=n.plural,c=n.formatNumber,s=n.valueAccessor,u=r.value(),t.chart.valueAccessor((function(t,e){return R(s||function(t){return t})(t,e,u)})),i?t.chart.html(i):o&&(a=a||o+"s",t.chart.html({one:"%number ".concat(o),some:"%number ".concat(a),none:"%number ".concat(a)})),c&&(l="string"==typeof c?t.$d3.format(c):c,t.chart.formatNumber(l));case 11:case"end":return e.stop()}}),e)})))()}}},void 0,!1,void 0,!1,void 0,void 0,void 0),W=$({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dc-chart-container"},[e("div",{staticClass:"dc-chart dc-pie-chart",attrs:{id:"chart-"+this._uid}})])},staticRenderFns:[]},(function(t){t&&t("data-v-07fae237_0",{source:".dc-chart.dc-pie-chart .pie-slice:hover{fill-opacity:.8}",map:void 0,media:void 0})}),{name:"DcPieChart",mixins:[T,N,P],defaultOptions:{minRadius:0,maxRadius:1/0,innerRadius:0,slicesCap:10,othersLabel:"others",useImprovedLabels:!0,labelWrapSeparator:";|;"},methods:{createChart:function(){var t=this;return u(_.mark((function e(){var r,n,i,o,a,c,s,u,l,d,h,p;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$options.dimension=t.createDimension(),e.next=3,t.createGroup(t.$options.dimension);case 3:r=e.sent,t.chart=new t.$dc.PieChart("#chart-".concat(t._uid)).dimension(t.$options.dimension).group(r).externalRadiusPadding(12),t.$super(T).createChart(),n=t.getRadius(),t.chart.radius(n),t.chart.width(n),t.chart.height(n),i=t.computedOptions,o=i.innerRadius,a=i.slicesCap,c=i.othersLabel,s=i.useImprovedLabels,a&&t.chart.slicesCap(a),c&&t.chart.othersLabel(c),o&&(u="number"==typeof o?o:n*(parseInt(o)||0)/100,t.chart.innerRadius(u)),s&&(l=function(){var e=Math.min(t.chart.width(),t.chart.height())/1.8,r=Math.min(t.chart.radius(),e);return t.$d3.arc().outerRadius(r).innerRadius(t.chart.innerRadius())},d=function(t,e){var r=e.centroid(t);return r.some((function(t){return isNaN(t)}))?[0,0]:r},h=function(e){var r=t.$d3,n=t.computedOptions.labelWrapSeparator;e.each((function(){var t=r.select(this),e=t.text().split(n);if(e&&!(e.length<2)){var i=t.attr("transform"),o=parseFloat(i.slice(i.indexOf("translate(")+10,i.indexOf(","))),a=parseFloat(i.slice(i.indexOf(",")+1,i.indexOf(")")));if(Number.isNaN(o)||Number.isNaN(a))console.warn("unable to wrap text",i,o,a,i.slice(i.indexOf("translate(")+10,i.indexOf(",")));else{var c=t.text(null).append("tspan").attr("transform","translate(".concat(o,", ").concat(a,")")).attr("x",0).attr("y",0);c.text(e[0]),(c=t.append("tspan").attr("transform","translate(".concat(o,", ").concat(a,")")).attr("x",0).attr("y",14)).text("(".concat(e[1].replace(/[^0-9\-.]/g,""),")"))}}}))},p=function(){t.chart.selectAll("text.pie-label").attr("transform",(function(e,r){var n=l(t.chart),i=d(e,n),o=(r+1)/6+.3;return i[1]<0&&(o=1),"translate(".concat(i[0],", ").concat(i[1]*o,")")})),t.chart.selectAll(".pie-label-group text.pie-label").transition().call(h)},t.chart.on("renderlet.vue-dcjs",(function(e){var r=t.getRadius();t.chart.radius()!==r&&(t.chart.radius(r),t.chart.height(r),t.chart.width(r),t.chart.redraw())})),t.chart.on("pretransition.vue-dcjs",p));case 15:case"end":return e.stop()}}),e)})))()},renderChart:function(){var t=this;return new Promise((function(e){t.$super(T).renderChart().then((function(){t.$nextTick((function(){return t.computedOptions.useImprovedLabels&&t.chart.redraw(),e()}))}))}))},getRadius:function(){var t=document.querySelector("#chart-".concat(this._uid));if(!t)return 0;var e=t.clientWidth;if(!e&&t.parentNode&&t.parentNode.parentNode){var r=0,n=t.parentNode.parentNode;try{var i=window.getComputedStyle(n,null);r+=parseInt(i.getPropertyValue("padding-left"))||0,r+=parseInt(i.getPropertyValue("padding-right"))||0}catch(t){r=0}e=n.clientWidth-r}var o=this.computedOptions;return j(e,o.minRadius,o.maxRadius)}}},void 0,!1,void 0,!1,F,void 0,void 0),V=$({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dc-chart-container dc-row-chart-container"},[e("div",{staticClass:"dc-chart dc-row-chart",class:{"is-scrollable":this.axisChart},style:this.computedStyle,attrs:{id:"chart-"+this._uid}}),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.canScroll,expression:"canScroll"}],staticClass:"dc-chart dc-axis-chart dc-row-axis-chart",attrs:{id:"chart-"+this._uid+"-axis"}})])},staticRenderFns:[]},(function(t){t&&t("data-v-dd80c184_0",{source:".dc-chart.dc-row-chart.is-scrollable>svg{position:relative;top:6px}.dc-chart.dc-row-chart.is-scrollable .axis g.tick line:not(.grid-line),.dc-chart.dc-row-chart.is-scrollable .axis g.tick text,.dc-chart.dc-row-chart.is-scrollable .axis path{display:none!important;stroke:none}",map:void 0,media:void 0})}),{name:"DcRowChart",mixins:[T,N,P],defaultOptions:{elastic:!0,scrollable:!0,minHeight:150,barHeight:20,axisChartheight:50,scrollHeight:"200px",scrollbarPadding:0},data:function(){return{axisChart:null,canScroll:!1}},methods:{createChart:function(){var t=this;return u(_.mark((function e(){var r,n,i,o,a,c,s,u,l,d,h;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.computedOptions,n=r.elastic,i=r.scrollable,o=r.minHeight,a=r.barHeight,c=r.axisChartHeight,s=r.valueAccessor,u=r.keyAccessor,t.$options.dimension=t.createDimension(),e.next=4,t.createGroup(t.$options.dimension);case 4:l=e.sent,t.canScroll=i&&l.size()*a>o,t.chart=new t.$dc.RowChart("#chart-".concat(t._uid)).dimension(t.$options.dimension).group(l),t.$super(T).createChart(),d=t.canScroll?Object.assign({},t.computedMargins,{bottom:-1}):t.computedMargins,t.chart.margins(d),n&&t.chart.elasticX(!0),t.canScroll&&(t.chart.height(l.size()*a),t.chart.transitionDuration(1e3),h=Object.assign({},t.computedMargins,{top:0}),t.axisChart=new t.$dc.AxisChart("#chart-".concat(t._uid,"-axis")).dimension(t.$options.dimension).group(l).height(c).margins(h),s&&t.axisChart.valueAccessor(R(s)),u&&t.axisChart.keyAccessor(R(u)),n&&t.axisChart.elastic(!0));case 12:case"end":return e.stop()}}),e)})))()},render:function(){var t;this.$super(T).render(),null===(t=this.axisChart)||void 0===t||t.render()},callOnCreate:function(){var t,e;null===(t=this.computedOptions)||void 0===t||null===(e=t.onCreate)||void 0===e||e.call(t,this.chart,this.axisChart),this.$emit("create",this.chart,this.axisChart)}},computed:{computedStyle:function(){var t=[];return this.canScroll&&(t.push("overflow-y: auto; overflow-x: hidden;"),this.computedOptions.scrollHeight&&t.push("max-height: ".concat(this.computedOptions.scrollHeight))),t.join("; ")},computedMargins:function(){var t,e,r=Object.assign({top:30,right:30,bottom:30,left:30},null===(t=this.$options.defaultOptions)||void 0===t?void 0:t.margins,null===(e=this.options)||void 0===e?void 0:e.margins),n=this.computedOptions.scrollbarPadding;return this.canScroll&&n&&(r.right+=n),r}}},void 0,!1,void 0,!1,F,void 0,void 0),q=$({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dc-chart-container dc-stacked-bar-container"},[e("div",{staticClass:"dc-chart dc-stacked-bar-chart",attrs:{id:"chart-"+this._uid}})])},staticRenderFns:[]},(function(t){t&&t("data-v-7698aa04_0",{source:".dc-stacked-bar-chart rect.bar.stack-deselected{opacity:.2}",map:void 0,media:void 0})}),{name:"DcStackedBarChart",mixins:[T,N,P,D,M],defaultOptions:{elastic:!0,showLegend:!0,legendOptions:{x:50}},props:{groups:{type:Array,required:!0},stacks:{type:Array,required:!0},colors:{type:Array},keySeparator:{type:String,default:";|;"},groupAccessor:{type:[String,Function]},stackAccessor:{type:[String,Function]},validateFunction:{type:Function}},methods:{stackKey:function(t){return"string"==typeof t?t:t.key||t.name||t},stackName:function(t){return"string"==typeof t?t:t.name||t.key||t},computedValidateFunction:function(t,e,r){if(this.validateFunction||this.computedOptions.validateFunction)return(this.validateFunction||this.computedOptions.validateFunction)(t,e,r);var n=this.stackKey(e);return this.stackAccessorFunc(t)===n&&this.groupAccessorFunc(t)===r},createChart:function(){var t,e=this;this.$options.dimension=this.ndx.dimension((function(t){return t}));var r=this.stackReducer,n=r.add,i=r.remove,o=r.init,a=this.stackedGroup(this.$options.dimension.groupAll().reduce(n,i,o)),c=this.computedOptions,s=c.elastic,u=c.title,l=c.barPadding,d=c.barGap,h=c.outerBarPadding;this.chart=new this.$dc.BarChart("#chart-".concat(this._uid)).dimension(this.$options.dimension),this.$super(T).createChart(),this.applyAxisOptions(),null!==(t=this.computedAxisOptions.x)&&void 0!==t&&t.x||(this.chart.x(this.$d3.scaleBand().domain(this.groups)),this.chart.xUnits(this.$dc.units.ordinal));var p=a.all().length||1;if(this.chart.barPadding(j(2/p,.1,.75)),void 0!==l?this.chart.barPadding(l):void 0!==d&&this.chart.gap(d),void 0!==h&&this.chart.outerPadding(h),s&&this.chart.elasticY(!0),this.computedColors.length){var f=this.$d3.scaleOrdinal().domain(this.stacks).range(this.stacks.map((function(t,r){return e.computedColors[r%e.computedColors.length]})));this.chart.colors(f)}this.chart.title(R(u||function(t){return"".concat(this.layer," ").concat(t.key,": ").concat(t.value[this.layer])}));var m=this.keySeparator||";|;",v=this.$dc;this.chart.on("pretransition.vue-dcjs",(function(t){t.selectAll("rect.bar").classed("deselected",!1).classed("stack-deselected",(function(e){var r=e.layer+m+e.x;return t.filter()&&!t.filters().some((function(t){return t[0]===r}))})).on("click",(function(e,r){t.filter([r.layer+m+r.x]),v.redrawAll()}))})),this.stacks.forEach((function(t,r){var n=e.stackKey(t),i=r?"stack":"group";e.chart[i](a,n,(function(t){return t.value[n]}))})),this.chart.legendables=function(){var t=e.chart;return e.stacks.map((function(r){var n=e.stackName(r),i=e.stackKey(r),o=e.chart.colors()(i);return{chart:t,name:n,color:o}}))},this.applyLegendOptions(),this.chart.filterHandler((function(t,r){return r&&r.length?t.filterFunction((function(t){return r.some((function(r){var n=g(r[0].split(e.keySeparator||";|;"),2),i=n[0],o=n[1];return e.computedValidateFunction(t,i,o)}))})):t.filter(null),r}))},stackedGroup:function(t){var e=this.keySeparator;return{all:function(){var r=Object.entries(t.value()).map((function(t){var e=g(t,2);return{key:e[0],value:e[1]}})),n={};return r.forEach((function(t){var r=g(t.key.split(e),2),i=r[0],o=r[1];n[i]=n[i]||{},n[i][o]=t.value})),Object.keys(n).map((function(t){return{key:t,value:n[t]}}))}}}},computed:{computedColors:function(){var t=this,e=this.colors||[];return this.stacks&&this.stacks.length&&this.stacks.every((function(t){return t.color}))&&(e=this.stacks.map((function(t){return t.color}))),!e.length&&this.stacks&&this.stacks.length&&(e=this.stacks.map((function(e,r){return t.$d3.interpolateTurbo((r+.5)/t.stacks.length)}))),e},stackReducer:function(){var t=this;return{add:function(e,r){return t.groups.forEach((function(n){t.stacks.forEach((function(i){var o=t.stackKey(i);t.computedValidateFunction(r,i,n)&&(e["".concat(n).concat(t.keySeparator).concat(o)]+=R(t.computedOptions.valueAccessor||function(t){return t.value})(r,i,n)||0)}))})),e},remove:function(e,r){return t.groups.forEach((function(n){t.stacks.forEach((function(i){var o=t.stackKey(i);t.computedValidateFunction(r,i,n)&&(e["".concat(n).concat(t.keySeparator).concat(o)]-=R(t.computedOptions.valueAccessor||function(t){return t.value})(r,i,n)||0)}))})),e},init:function(){var e={};return t.groups.forEach((function(r){t.stacks.forEach((function(n){var i=t.stackKey(n);e["".concat(r).concat(t.keySeparator).concat(i)]=0}))})),e}}},stackAccessorFunc:function(){return R(this.stackAccessor||this.computedOptions.stackAccessor||function(t){return t.stack})},groupAccessorFunc:function(){return R(this.groupAccessor||this.computedOptions.groupAccessor||function(t){return t.group})}}},void 0,!1,void 0,!1,F,void 0,void 0),U={registerComponents:!0},K={install:function(t,e){var r=Object.assign({},U,e);t.prototype.$super=function(t){var e=this;return new Proxy(t,{get:function(t,r){if(t.methods&&r in t.methods)return t.methods[r].bind(e)}})},t.use(O,r),r.registerComponents&&(t.component("dc-bar-chart",B),t.component("dc-checklist",I),t.component("dc-composite-line-chart",H),t.component("dc-date-chart",G),t.component("dc-number-display",z),t.component("dc-pie-chart",W),t.component("dc-row-chart",V),t.component("dc-stacked-bar-chart",q))}};exports.dc=o,exports.d3=a,Object.defineProperty(exports,"crossfilter",{enumerable:!0,get:function(){return c.default}}),exports.AxisMixin=D,exports.BaseChartMixin=T,exports.DcBarChart=B,exports.DcChecklist=I,exports.DcCompositeLineChart=H,exports.DcDateChart=G,exports.DcNumberDisplay=z,exports.DcPieChart=W,exports.DcRowChart=V,exports.DcStackedBarChart=q,exports.DimensionMixin=N,exports.GroupMixin=P,exports.LegendMixin=M,exports.VueDc=K,exports.default=K;
//# sourceMappingURL=index.js.map
