/*!
 * vue-dcjs v0.1.5
 * (c) 
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("dc"),e=require("d3"),i=require("crossfilter2"),r=require("vue-runtime-helpers/dist/normalize-component.mjs"),n=require("vue-runtime-helpers/dist/inject-style/browser.mjs"),s=require("@/dc-utils");function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var c=o(t),h=o(e),l=a(i),u=a(r),d=a(n);function p(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=m(t);if(e){var n=m(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return b(this,i)}}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var r,n,s=[],a=!0,o=!1;try{for(i=i.call(t);!(a=(r=i.next()).done)&&(s.push(r.value),!e||s.length!==e);a=!0);}catch(t){o=!0,n=t}finally{try{a||null==i.return||i.return()}finally{if(o)throw n}}return s}(t,e)||O(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){if(t){if("string"==typeof t)return k(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var _=function(i){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&v(t,e)}(o,t.CapMixin(t.ColorMixin(t.MarginMixin)));var r,n,s,a=y(o);function o(t,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),f(g(r=a.call(this,t,i)),"_g",void 0),f(g(r),"_scale",void 0),f(g(r),"_elastic",void 0),f(g(r),"_type","axisBottom"),f(g(r),"_theAxis",e.axisBottom()),f(g(r),"_axisData",void 0),f(g(r),"validAxisTypes",["axisBottom","axisTop","axisLeft","axisRight"]),f(g(r),"axisCap",void 0),r.anchor(t,i),r}return r=o,(n=[{key:"calculateAxisScale",value:function(){var t=this;if(!this._scale||this._elastic){var i=e.extent(this._axisData,(function(e,i){return t.cappedValueAccessor(e,i)}));i[0]>0&&(i[0]=0),i[1]<0&&(i[1]=0),this._scale=e.scaleLinear().domain(i).range([0,"axisBottom"===this._type||"axisTop"===this._type?this.effectiveWidth():this.effectiveHeight()])}this._theAxis.scale(this._scale)}},{key:"drawAxis",value:function(){var e=this._g.select("g.axis");this.calculateAxisScale(),e.empty()&&(e=this._g.append("g").attr("class","axis")),t.transition(e,this.transitionDuration(),this.transitionDelay()).call(this._theAxis)}},{key:"_doRender",value:function(){return this.minHeight(1),this.height(50),this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate(".concat(this.margins().left,", ").concat(this.margins().top,")")),this.drawChart(),this}},{key:"type",value:function(t){return arguments.length?(-1!==this.validAxisTypes.indexOf(t)?(this._theAxis=d3[t](),this._type=t):console.error(t+" is not a valid d3 axis type"),this):this._type}},{key:"scale",value:function(t){return arguments.length?(this._scale=t,this):this._scale}},{key:"elastic",value:function(t){return arguments.length?(this._elastic=t,this):this._elastic}},{key:"axis",value:function(){return this._theAxis}},{key:"drawChart",value:function(){this._axisData=this.data(),this.drawAxis()}},{key:"_doRedraw",value:function(){return this.drawChart(),this}}])&&p(r.prototype,n),s&&p(r,s),Object.defineProperty(r,"prototype",{writable:!1}),o}();require("dc/dist/style/dc.min.css"),c.AxisChart=_;var w={install:function(t,e){null!=e&&e.defaultColors&&(c.config.defaultColors=e.defaultColors),t.prototype.$dc=c,t.prototype.$d3=h,t.prototype.$crossfilter=l.default}};function A(t){return"function"==typeof t?t:function(e){return e[t]}}var $={name:"BaseChartMixin",dimension:null,myName:"baseChart",props:{ndx:{type:Object,required:!0},name:{type:String},options:{type:Object}},baseDefaultOptions:{disposeDimension:!0,render:!0},data:function(){return{chart:null}},mounted:function(){this.drawChart()},methods:{reset:function(){this.chart&&this.chart.filter(null)},drawChart:function(){this.createChart(),this.addChartExtras(),this.computedOptions.render&&this.renderChart()},createChart:function(){var t=this.computedOptions,e=t.valueAccessor,i=t.margins,r=t.keyAccessor,n=t.title,s=t.label,a=t.height,o=t.width;e&&this.chart.valueAccessor(A(e)),i&&this.chart.margins(i),r&&this.chart.keyAccessor(A(r)),n&&this.chart.title(A(n)),s&&this.chart.label(A(s)),a&&this.chart.height(a),o&&this.chart.width(o)},renderChart:function(){var t=this;return new Promise((function(e){t.$emit("pre-render",t.chart),t.$nextTick((function(){t.render(),t.$nextTick((function(){return t.$emit("post-render",t.chart),e(t.chart)}))}))}))},render:function(){this.chart.render()},addChartExtras:function(){(this.name||this.computedOptions.name)&&(this.chart.name=this.name||this.computedOptions.name),this.chart.vueOptions=this.computedOptions}},computed:{computedMargins:function(){var t,e;return Object.assign({top:30,right:30,bottom:30,left:30},null===(t=this.$options.defaultOptions)||void 0===t?void 0:t.margins,null===(e=this.options)||void 0===e?void 0:e.margins)},computedOptions:function(){return Object.assign({},this.$options.baseDefaultOptions,this.$options.defaultOptions,this.options)}},beforeDestroy:function(){if(this.chart){var t=this.chart.dimension();t&&t.filterAll(),this.$dc.chartRegistry.deregister(this.chart)}this.computedOptions.disposeDimension&&this.$options.dimension&&this.$options.dimension.dispose()}},F=u.default({},void 0,$,void 0,void 0,void 0,!1,void 0,void 0,void 0),S={name:"DimensionMixin",props:{dimensionConstructor:{type:[String,Function]},dimensionIsArray:{type:Boolean,default:!1}},methods:{createDimension:function(){var t=function(t){return t};return"string"==typeof this.dimensionConstructor?t=this.$dc.pluck(this.dimensionConstructor):"function"==typeof this.dimensionConstructor&&(t=this.dimensionConstructor),this.ndx.dimension(t,this.dimensionIsArray)}}},j=u.default({},void 0,S,void 0,void 0,void 0,!1,void 0,void 0,void 0),D={name:"GroupMixin",props:{reducer:{type:[String,Function,Object]},groupOptions:{type:Object}},methods:{createGroup:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i?t.groupAll():t.group();if(this.groupOptions&&this.groupOptions.order?"string"==typeof this.groupOptions.order?r.order((function(t){return t[e.groupOptions.order]})):"function"==typeof this.groupOptions.order&&r.order(this.groupOptions.order):this.groupOptions&&this.groupOptions.orderNatural&&r.orderNatural(),"string"==typeof this.reducer||"function"==typeof this.reducer)r.reduceSum(A(this.reducer));else if(this.reducer.add&&this.reducer.remove&&this.reducer.init){var n=this.reducer,s=n.add,a=n.remove,o=n.init;r.reduce(s,a,o)}return this.$emit("group-created",r),r},ordinalToLinear:function(t,e){var i,r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{top:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return n?Object.entries(t.value()).map((function(t){var e=x(t,2);return{key:e[0],value:e[1]}})).sort((function(t,i){return e(i.value)-e(t.value)})).slice(0,i):t.order((function(t){return e(t)})).top(i)},all:function(){var s=[];return s=n?Object.entries(t.value()).map((function(t){var e=x(t,2);return{key:e[0],value:e[1]}})).sort((function(t,i){return e(i.value)-e(t.value)})):t.order((function(t){return e(t)})).top(1/0),i={},r=[],s.forEach((function(t,e){i[t.key]=e,r[e]=t.key})),s},ord2int:function(t){return i||this.all(),i[t]},int2ord:function(t){return r||this.all(),r[t]}}}}},R=u.default({},void 0,D,void 0,void 0,void 0,!1,void 0,void 0,void 0),M={name:"DcBarChart",mixins:[F,j,R],defaultOptions:{elastic:!0,scrollable:!1,minScrollable:12,scrollHeight:12,mouseZoom:!0},data:function(){return{scaleChart:null,top:0}},methods:{createChart:function(){var t=this.computedOptions,e=t.elastic,i=t.scrollable,r=t.minScrollable,n=t.scrollHeight,s=t.groupAll,a=t.valueAccessor,o=t.label,c=t.filterFunction,h=t.mouseZoom;this.$options.dimension=this.createDimension();var l=A(a||function(t){return t}),u=this.ordinalToLinear(this.createGroup(this.$options.dimension,s),l,s);this.top=u.all().length;var d=[-.5,this.top-.5],p=this.top?document.querySelector("#chart-".concat(this._uid)).clientWidth/r/this.top:0;if(p=Math.max(Math.ceil(p),1),this.chart=new this.$dc.BarChart("#chart-".concat(this._uid)).dimension(this.$options.dimension).group(u).x(this.$d3.scaleLinear().domain(d)).xUnits(this.$dc.units.integers).centerBar(!0).brushOn(!1).gap(p),this.$super(F).createChart(),this.chart.keyAccessor((function(t){return u.ord2int(t.key)})),this.chart.valueAccessor((function(t){return l(t.value)})),this.chart.title(this.titleAccessor),this.chart.transitionDuration(this.canScroll?50:250),e&&this.chart.elasticY(!0),this.chart.xAxis().tickFormat((function(t){return A(o||function(t){return t})(u.int2ord(t))})),this.top<=r/4){var f=this.top||1;this.chart.barPadding(r/2/f)}var m=[];this.chart.filterHandler((function(t,e){})),this.chart.hasFilter=function(t){return Array.isArray(t)?t.every((function(t){return m.includes(t)})):t?m.includes(t):m.length},this.chart.applyFilter=function(){m.length?this.dimension().filterFunction((function(t){return c?c(m,t):m.includes(t)})):this.dimension().filter(null)},this.chart.filterAll=function(){m=[],this.applyFilter()};var v=this.$dc,g=this.$d3;if(this.chart.fadeDeselectedArea=function(t){var e=this.chartBodyG().selectAll("rect.bar");m.length?(e.classed(v.constants.SELECTED_CLASS,(function(t){return m.includes(t.data.key)})),e.classed(v.constants.DESELECTED_CLASS,(function(t){return!m.includes(t.data.key)}))):(e.classed(v.constants.SELECTED_CLASS,!1),e.classed(v.constants.DESELECTED_CLASS,!1))},this.chart.on("pretransition",(function(t){t.selectAll("rect.bar").on("click.ordinal-select",(function(e,i){var r=m.indexOf(i.data.key);r>=0?m.splice(r,1):m.push(i.data.key),t.applyFilter(),t.redrawGroup()}))})),this.chart.on("preRedraw",(function(t){var e=t.x().domain(),i=Math.ceil(e[0]),r=Math.floor(e[1]);t.xAxis().tickValues(g.range(i,r+1)),t.rescale()})),i){var b=this.computedMargins,y=b.top,x=b.bottom,C=b.left,O=b.right;this.chart.margins({top:0,bottom:x,left:C,right:O}),this.scaleChart=new this.$dc.BarChart("#chart-".concat(this._uid,"-range")).dimension(this.$options.dimension).group(u).height(n+y).margins({left:C,top:y,right:O-10,bottom:2}).x(this.$d3.scaleLinear().domain(d)).xUnits(this.$dc.units.integers).keyAccessor((function(t){return u.ord2int(t.key)})).centerBar(!0).valueAccessor((function(t){return l(t.value)})).brushOn(!0).transitionDuration(0),this.scaleChart.filterHandler((function(){})),this.scaleChart.yAxis().ticks(0),this.scaleChart.xAxis().ticks(0),this.chart.rangeChart(this.scaleChart),this.chart.zoomScale([Math.min(8,Math.ceil(this.top/12)),Math.min(this.top,12)]),e&&this.scaleChart.elasticY(!0),h&&this.chart.mouseZoomable(this.canScroll)}},render:function(){if(this.$super(F).render(),this.canScroll){var t;null===(t=this.scaleChart)||void 0===t||t.render();var e=Math.floor(this.top/Math.min(8,Math.ceil(this.top/12)));this.chart.focus([-1,e])}}},computed:{canScroll:function(){return this.computedOptions.scrollable&&this.top>=this.computedOptions.minScrollable}}},L=function(t){t&&t("data-v-5ea159a4_0",{source:".dc-chart-container.dc-scroll-bar-chart-container{position:relative;z-index:0}.dc-scroll-bar-chart-container .dc-bar-chart .axis.x .tick text{text-anchor:end;transform:rotate(-33deg) translate(-4px,-8px)}.dc-scroll-bar-chart-container .dc-scroll-bar-range .axis,.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler .axis,.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler.hidden,.dc-scroll-bar-chart-container .dc-scroll-bar-range.hidden{display:none}.dc-scroll-bar-chart-container .dc-scroll-bar-range{z-index:1;position:relative}.dc-scroll-bar-chart-container .dc-scroll-bar-range .custom-brush-handle{stroke:#000}.dc-scroll-bar-chart-container .dc-scroll-bar-range g.brush{fill:rgba(100,100,100,.1)}.dc-scroll-bar-chart-container .dc-scroll-bar-range svg{display:block}.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler{height:12px}",map:void 0,media:void 0})},E=u.default({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dc-chart-container dc-scroll-bar-chart-container"},[t.computedOptions.scrollable?i("div",{staticStyle:{position:"relative","z-index":"0"}},[i("div",{staticClass:"dc-scroll-bar-range",class:{hidden:!t.canScroll},attrs:{id:"chart-"+t._uid+"-range"}}),t._v(" "),i("div",{staticClass:"dc-scroll-bar-range-filler",class:{hidden:t.canScroll}})]):t._e(),t._v(" "),i("div",{staticClass:"dc-chart dc-bar-chart",attrs:{id:"chart-"+t._uid}})])},staticRenderFns:[]},L,M,void 0,!1,void 0,!1,d.default,void 0,void 0),T={name:"DcChecklist",props:{chart:{type:[String,Object],required:!0},searchable:{type:Boolean,default:!0},search:{type:String,default:""},othersLimit:{type:Number},digits:{type:Number},maxHeight:{type:[String,Number],default:null},othersLabel:{type:String}},data:function(){return{groupFilter:"",groups:[],others:[],inFilter:[],waitInterval:null,waitingTimer:1}},mounted:function(){this.dcChart?this.reset():this.waitForChartInit(!0)},watch:{dcChart:function(t,e){this.reset()},search:function(){this.search!=this.groupFilter&&(this.groupFilter=this.search)}},filters:{formatFilter:function(t,e){return e||0===e?t.toFixed(e):t}},methods:{reset:function(){this.resetFilters(),this.updateListValues(),this.watchChartChanges()},resetFilters:function(){this.inFilter=Array.from(new Set(s.flat(this.dcChart.filters()))),this.groupFilter=""},updateListValues:function(){var t=this;this.groups=JSON.parse(JSON.stringify(this.dcChart.group().order((function(e){return t.valueAccessor({value:e})})).top(1/0))),this.options.slicesCap||this.othersLimit?this.others=this.groups.slice(this.options.slicesCap||this.othersLimit).map((function(t){return t.key})):this.others=[]},checkOthersFilterToggled:function(){var t=this,e=this.dcChart.filters(),i=this.othersLabel||this.options.othersLabel||"others",r=this.others.filter((function(i){return!e.includes(i)&&t.inFilter.includes(i)}));e.includes(i)&&r.length&&(e.push.apply(e,C(r)),this.inFilter=e,this.dcChart.replaceFilter([e]))},toggleFilterFor:function(t){var e=this;this.inFilter.includes(t)?this.inFilter=this.inFilter.filter((function(e){return e!==t})):this.inFilter.push(t),this.dcChart.replaceFilter([this.inFilter]),this.$nextTick((function(){return e.$dc.redrawAll()}))},updateSearch:function(){this.$emit("update:search",this.groupFilter),this.$emit("update-search",this.groupFilter)},watchChartChanges:function(){var t=this;this.dcChart.on("renderlet",(function(){t.updateListValues()})),this.dcChart.on("filtered",(function(){t.$nextTick((function(){t.checkOthersFilterToggled(),t.resetFilters(),t.updateListValues()}))}))},waitForChartInit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.waitInterval=setInterval((function(){t.waitingTimer=(t.waitingTimer+1)%100+1,t.$nextTick((function(){t.dcChart&&(t.reset(),clearInterval(t.waitInterval),t.waitInterval=null)}))}),e?50:300)}},computed:{dcChart:function(){var t=this;return"string"==typeof this.chart&&this.waitingTimer?this.$dc.chartRegistry.list().find((function(e){return e.name===t.chart})):this.chart},shownGroups:function(){var t=this;return this.groupFilter&&this.groupFilter.length?this.groups.filter((function(e){return new RegExp(t.groupFilter,"gi").test(e.key)})):this.groups},valueAccessor:function(){return s.accessorFunc(this.options.valueAccessor||function(t){return t.value})},computedDigits:function(){return this.digits||0===this.digits?this.digits:this.options.digits},computedStyle:function(){var t=[];return this.maxHeight&&(t.push("overflow-y: auto"),"number"==typeof this.maxHeight?t.push("max-height: ".concat(this.maxHeight,"px")):t.push("max-height: ".concat(this.maxHeight))),t.join("; ")},options:function(){var t;return(null===(t=this.dcChart)||void 0===t?void 0:t.vueOptions)||{}}},beforeDestroy:function(){this.waitInterval&&clearInterval(this.waitInterval)}},P=function(t){t&&t("data-v-22e43388_0",{source:".dc-check-list-container{text-align:left;width:100%}.dc-check-list-container .dc-search-input-container .dc-search-input-label{display:block;font-weight:700;font-size:.85rem;margin-bottom:-.25rem}.dc-check-list-container .dc-search-input-container .dc-search-input{border-radius:.25rem;padding:.25rem;width:calc(100% - 1.25rem);border-color:#000}.dc-check-list-container .dc-checkbox-container .dc-checkbox{display:flex;align-items:center;cursor:pointer}.dc-check-list-container .dc-checkbox-container .dc-checkbox:nth-child(2n){background-color:#f5f5f5}.dc-check-list-container .dc-checkbox-container .dc-checkbox .dc-option-box{display:inline-block;width:1rem;height:1rem;border-radius:.25rem;margin:.25rem;border:2px solid #000}.dc-check-list-container .dc-checkbox-container .dc-checkbox .dc-option-box.selected{background-color:#388ce6}.dc-check-list-container .dc-checkbox-container .dc-checkbox:hover .dc-option-box{background-color:rgba(56,140,230,.25)}.dc-check-list-container .dc-checkbox-container .dc-checkbox:hover .dc-option-box.selected{background-color:rgba(56,140,230,.75)}",map:void 0,media:void 0})},I=u.default({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dc-check-list-container",style:t.computedStyle},[t._t("search",(function(){return[i("div",{staticClass:"dc-search-input-container"},[i("label",{staticClass:"dc-search-input-label",attrs:{for:".dc-search-input"}},[t._v("Search")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.groupFilter,expression:"groupFilter"}],staticClass:"dc-search-input",domProps:{value:t.groupFilter},on:{input:[function(e){e.target.composing||(t.groupFilter=e.target.value)},t.updateSearch]}})])]})),t._v(" "),i("div",{staticClass:"dc-checkbox-container"},t._l(t.shownGroups,(function(e){return i("div",{key:e.key,staticClass:"dc-checkbox",on:{click:function(i){return t.toggleFilterFor(e.key)}}},[t._t("option",(function(){return[i("span",{staticClass:"dc-option-box",class:{selected:t.inFilter.includes(e.key)}}),t._v(" "),i("span",{staticClass:"dc-option-label",class:{selected:t.inFilter.includes(e.key)}},[t._v("\n          "+t._s(e.key)+" ("+t._s(t._f("formatFilter")(e.value,t.computedDigits))+")\n        ")])]}),{option:e,value:t.inFilter.includes(e.key)})],2)})),0)],2)},staticRenderFns:[]},P,T,void 0,!1,void 0,!1,d.default,void 0,void 0),H={name:"DcPieChart",mixins:[F,j,R],defaultOptions:{minRadius:0,maxRadius:1/0,innerRadius:0,slicesCap:10,othersLabel:"others",useImprovedLabels:!0,labelWrapSeparator:";|;"},methods:{createChart:function(){var t=this;this.$options.dimension=this.createDimension();var e=this.createGroup(this.$options.dimension);this.chart=new this.$dc.PieChart("#chart-".concat(this._uid)).dimension(this.$options.dimension).group(e).externalRadiusPadding(12),this.$super(F).createChart();var i=this.getRadius();this.chart.radius(i),this.chart.width(i),this.chart.height(i);var r=this.computedOptions,n=r.innerRadius,s=r.slicesCap,a=r.othersLabel,o=r.useImprovedLabels;if(s&&this.chart.slicesCap(s),a&&this.chart.othersLabel(a),n){var c="number"==typeof n?n:i*(parseInt(n)||0)/100;this.chart.innerRadius(c)}if(o){var h=function(e){var i=t.$d3,r=t.computedOptions.labelWrapSeparator;e.each((function(){var t=i.select(this),e=t.text().split(r);if(e&&!(e.length<2)){var n=t.attr("transform"),s=parseFloat(n.slice(n.indexOf("translate(")+10,n.indexOf(","))),a=parseFloat(n.slice(n.indexOf(",")+1,n.indexOf(")")));if(Number.isNaN(s)||Number.isNaN(a))console.warn("unable to wrap text",n,s,a,n.slice(n.indexOf("translate(")+10,n.indexOf(",")));else{var o=t.text(null).append("tspan").attr("transform","translate(".concat(s,", ").concat(a,")")).attr("x",0).attr("y",0);o.text(e[0]),(o=t.append("tspan").attr("transform","translate(".concat(s,", ").concat(a,")")).attr("x",0).attr("y",14)).text("(".concat(e[1].replace(/[^0-9\-.]/g,""),")"))}}}))},l=function(){t.chart.selectAll("text.pie-label").attr("transform",(function(e,i){var r=function(t,e){var i=e.centroid(t);return i.some((function(t){return isNaN(t)}))?[0,0]:i}(e,function(){var e=Math.min(t.chart.width(),t.chart.height())/1.8,i=Math.min(t.chart.radius(),e);return t.$d3.arc().outerRadius(i).innerRadius(t.chart.innerRadius())}(t.chart)),n=(i+1)/6+.3;return r[1]<0&&(n=1),"translate(".concat(r[0],", ").concat(r[1]*n,")")})),t.chart.selectAll(".pie-label-group text.pie-label").transition().call(h)};this.chart.on("renderlet",(function(e){var i=t.getRadius();t.chart.radius()!==i&&(t.chart.height(i),t.chart.width(i),t.chart.redraw()),l()})),this.chart.on("pretransition",l)}},renderChart:function(){var t=this;return new Promise((function(e){t.$super(F).renderChart().then((function(){t.$nextTick((function(){return t.computedOptions.useImprovedLabels&&t.chart.redraw(),e()}))}))}))},getRadius:function(){var t=document.querySelector("#chart-".concat(this._uid));if(!t)return 0;var e=t.clientWidth,i=this.computedOptions;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(e,Math.min(t,i))}(e,i.minRadius,i.maxRadius)}}},N=function(t){t&&t("data-v-4035cc8e_0",{source:".dc-chart.dc-pie-chart .pie-slice:hover{fill-opacity:.8}",map:void 0,media:void 0})},B=u.default({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dc-chart-container"},[e("div",{staticClass:"dc-chart dc-pie-chart",attrs:{id:"chart-"+this._uid}})])},staticRenderFns:[]},N,H,void 0,!1,void 0,!1,d.default,void 0,void 0),q={name:"DcRowChart",mixins:[F,j,R],defaultOptions:{elastic:!0,scrollable:!0,minHeight:150,barHeight:20,axisChartheight:50,scrollHeight:"200px",scrollbarPadding:8},data:function(){return{axisChart:null}},methods:{createChart:function(){var t=this.computedOptions,e=t.elastic,i=t.scrollable,r=t.minHeight,n=t.barHeight,s=t.axisChartHeight,a=t.valueAccessor,o=t.keyAccessor;this.$options.dimension=this.createDimension();var c=this.createGroup(this.$options.dimension);this.chart=new this.$dc.RowChart("#chart-".concat(this._uid)).dimension(this.$options.dimension).group(c),this.$super(F).createChart();var h=i?Object.assign({},this.computedMargins,{bottom:-1}):this.computedMargins;if(this.chart.margins(h),e&&this.chart.elasticX(!0),i){this.chart.height(Math.max(r,c.size()*n)),this.chart.transitionDuration(1e3);var l=Object.assign({},this.computedMargins,{top:0});this.axisChart=new this.$dc.AxisChart("#chart-".concat(this._uid,"-axis")).dimension(this.$options.dimension).group(c).height(s).margins(l),a&&this.axisChart.valueAccessor(A(a)),o&&this.axisChart.keyAccessor(A(o)),e&&this.axisChart.elastic(!0)}},render:function(){var t;this.$super(F).render(),null===(t=this.axisChart)||void 0===t||t.render()}},computed:{computedStyle:function(){var t=[];return this.computedOptions.scrollable&&(t.push("overflow-y: auto; overflow-x: hidden;"),this.computedOptions.scrollHeight&&t.push("max-height: ".concat(this.computedOptions.scrollHeight))),t.join("; ")},computedMargins:function(){var t,e,i=Object.assign({top:30,right:30,bottom:30,left:30},null===(t=this.$options.defaultOptions)||void 0===t?void 0:t.margins,null===(e=this.options)||void 0===e?void 0:e.margins),r=this.computedOptions,n=r.scrollable,s=r.scrollbarPadding;return n&&s&&(i.right+=s),i}}},G=u.default({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dc-chart-container dc-row-chart-container"},[e("div",{staticClass:"dc-chart dc-row-chart",style:this.computedStyle,attrs:{id:"chart-"+this._uid}}),this._v(" "),this.computedOptions.scrollable?e("div",{staticClass:"dc-chart dc-axis-chart dc-row-axis-chart",attrs:{id:"chart-"+this._uid+"-axis"}}):this._e()])},staticRenderFns:[]},void 0,q,void 0,!1,void 0,!1,void 0,void 0,void 0),z={registerComponents:!0},V={install:function(t,e){var i=Object.assign({},z,i);t.prototype.$super=function(t){var e=this;return new Proxy(t,{get:function(t,i){if(t.methods&&i in t.methods)return t.methods[i].bind(e)}})},t.use(w,i),i.registerComponents&&(t.component("dc-bar-chart",E),t.component("dc-checklist",I),t.component("dc-row-chart",G),t.component("dc-pie-chart",B))}};exports.dc=c,exports.d3=h,Object.defineProperty(exports,"crossfilter",{enumerable:!0,get:function(){return l.default}}),exports.DcBarChart=E,exports.DcChecklist=I,exports.DcPieChart=B,exports.DcRowChart=G,exports.VueDc=V;
//# sourceMappingURL=index.js.map
