/*!
 * vue-dcjs v0.1.7
 * (c) 
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("dc"),i=require("d3"),e=require("crossfilter2"),r=require("vue-runtime-helpers/dist/normalize-component.mjs"),n=require("vue-runtime-helpers/dist/inject-style/browser.mjs"),s=require("@/dc-utils");function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var i=Object.create(null);return t&&Object.keys(t).forEach((function(e){if("default"!==e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}})),i.default=t,Object.freeze(i)}var c=a(t),h=a(i),u=o(e),l=o(r),d=o(n);function p(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,i){return(v=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function b(t){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=m(t);if(i){var n=m(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return y(this,e)}}function x(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,n,s=[],o=!0,a=!1;try{for(e=e.call(t);!(o=(r=e.next()).done)&&(s.push(r.value),!i||s.length!==i);o=!0);}catch(t){a=!0,n=t}finally{try{o||null==e.return||e.return()}finally{if(a)throw n}}return s}(t,i)||O(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,i){if(t){if("string"==typeof t)return k(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?k(t,i):void 0}}function k(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,r=new Array(i);e<i;e++)r[e]=t[e];return r}var _=function(e){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),i&&v(t,i)}(a,t.CapMixin(t.ColorMixin(t.MarginMixin)));var r,n,s,o=b(a);function a(t,e){var r;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,a),f(g(r=o.call(this,t,e)),"_g",void 0),f(g(r),"_scale",void 0),f(g(r),"_elastic",void 0),f(g(r),"_type","axisBottom"),f(g(r),"_theAxis",i.axisBottom()),f(g(r),"_axisData",void 0),f(g(r),"validAxisTypes",["axisBottom","axisTop","axisLeft","axisRight"]),f(g(r),"axisCap",void 0),r.anchor(t,e),r}return r=a,(n=[{key:"calculateAxisScale",value:function(){var t=this;if(!this._scale||this._elastic){var e=i.extent(this._axisData,(function(i,e){return t.cappedValueAccessor(i,e)}));e[0]>0&&(e[0]=0),e[1]<0&&(e[1]=0),this._scale=i.scaleLinear().domain(e).range([0,"axisBottom"===this._type||"axisTop"===this._type?this.effectiveWidth():this.effectiveHeight()])}this._theAxis.scale(this._scale)}},{key:"drawAxis",value:function(){var i=this._g.select("g.axis");this.calculateAxisScale(),i.empty()&&(i=this._g.append("g").attr("class","axis")),t.transition(i,this.transitionDuration(),this.transitionDelay()).call(this._theAxis)}},{key:"_doRender",value:function(){return this.minHeight(1),this.height(50),this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate(".concat(this.margins().left,", ").concat(this.margins().top,")")),this.drawChart(),this}},{key:"type",value:function(t){return arguments.length?(-1!==this.validAxisTypes.indexOf(t)?(this._theAxis=d3[t](),this._type=t):console.error(t+" is not a valid d3 axis type"),this):this._type}},{key:"scale",value:function(t){return arguments.length?(this._scale=t,this):this._scale}},{key:"elastic",value:function(t){return arguments.length?(this._elastic=t,this):this._elastic}},{key:"axis",value:function(){return this._theAxis}},{key:"drawChart",value:function(){this._axisData=this.data(),this.drawAxis()}},{key:"_doRedraw",value:function(){return this.drawChart(),this}}])&&p(r.prototype,n),s&&p(r,s),Object.defineProperty(r,"prototype",{writable:!1}),a}();require("dc/dist/style/dc.min.css"),c.AxisChart=_;var w={install:function(t,i){null!=i&&i.defaultColors&&(c.config.defaultColors=i.defaultColors),t.prototype.$dc=c,t.prototype.$d3=h,t.prototype.$crossfilter=u.default}},A={props:{axisOptions:{type:Object}},methods:{applyAxisOptions:function(){var t,i,e,r,n=this,s=this.computedAxisOptions.x,o=this.computedAxisOptions.y;if(this.chart&&(s||o)){var a=null===(t=(i=this.chart).xAxis)||void 0===t?void 0:t.call(i),c=null===(e=(r=this.chart).yAxis)||void 0===e?void 0:e.call(r),h=function(t,i){(i||0===i)&&t.ticks(i)},u=function(t,i){"string"==typeof i?t.tickFormat(n.$d3.format(i)):"number"==typeof i?t.tickFormat=n.$d3.format(",.".concat(i,"f")):"function"==typeof i&&t.tickFormat(i)},l=function(t,i){i&&Array.isArray(i)&&t.tickValues(i)},d=function(t,i){(i||0===i)&&t.tickSize(i)};s&&a&&(h(a,s.ticks),u(a,s.format),l(a,s.values),d(a,s.size),s.x&&"function"==typeof this.chart.x&&this.chart.x(s.x)),o&&c&&(h(c,o.ticks),u(c,o.format),l(c,o.values),d(c,o.size),o.y&&"function"==typeof this.chart.y&&this.chart.y(o.y))}}},computed:{computedAxisOptions:function(){var t,i,e={x:null,y:null};return this.computedOptions.xAxis&&(e.x=Object.assign({},this.computedOptions.xAxis)),this.computedOptions.yAxis&&(e.y=Object.assign({},this.computedOptions.yAxis)),null!==(t=this.axisOptions)&&void 0!==t&&t.x&&(e.x=Object.assign({},e.x,this.axisOptions.x)),null!==(i=this.axisOptions)&&void 0!==i&&i.y&&(e.y=Object.assign({},e.y,this.axisOptions.y)),e}}},$=l.default({},void 0,A,void 0,void 0,void 0,!1,void 0,void 0,void 0);function D(t){return"function"==typeof t?t:function(i){return i[t]}}var F={name:"BaseChartMixin",dimension:null,myName:"baseChart",props:{ndx:{type:Object,required:!0},name:{type:String},options:{type:Object}},baseDefaultOptions:{disposeDimension:!0,render:!0},data:function(){return{chart:null}},mounted:function(){this.drawChart()},methods:{reset:function(){this.chart&&this.chart.filter(null)},drawChart:function(){this.createChart(),this.addChartExtras(),this.computedOptions.render&&this.renderChart()},createChart:function(){var t=this.computedOptions,i=t.valueAccessor,e=t.margins,r=t.keyAccessor,n=t.title,s=t.label,o=t.height,a=t.width;i&&this.chart.valueAccessor(D(i)),e&&this.chart.margins(e),r&&this.chart.keyAccessor(D(r)),n&&this.chart.title(D(n)),s&&this.chart.label(D(s)),o&&this.chart.height(o),a&&this.chart.width(a)},renderChart:function(){var t=this;return new Promise((function(i){t.$emit("pre-render",t.chart),t.$nextTick((function(){t.render(),t.$nextTick((function(){return t.$emit("post-render",t.chart),i(t.chart)}))}))}))},render:function(){this.chart.render()},addChartExtras:function(){(this.name||this.computedOptions.name)&&(this.chart.name=this.name||this.computedOptions.name),this.chart.vueOptions=this.computedOptions}},computed:{computedMargins:function(){var t,i;return Object.assign({top:30,right:30,bottom:30,left:30},null===(t=this.$options.defaultOptions)||void 0===t?void 0:t.margins,null===(i=this.options)||void 0===i?void 0:i.margins)},computedOptions:function(){return Object.assign({},this.$options.baseDefaultOptions,this.$options.defaultOptions,this.options)}},beforeDestroy:function(){if(this.chart){var t=this.chart.dimension();t&&t.filterAll(),this.$dc.chartRegistry.deregister(this.chart)}this.computedOptions.disposeDimension&&this.$options.dimension&&this.$options.dimension.dispose()}},S=l.default({},void 0,F,void 0,void 0,void 0,!1,void 0,void 0,void 0),j={name:"DimensionMixin",props:{dimensionConstructor:{type:[String,Function]},dimensionIsArray:{type:Boolean,default:!1}},methods:{createDimension:function(){var t=function(t){return t};return"string"==typeof this.dimensionConstructor?t=this.$dc.pluck(this.dimensionConstructor):"function"==typeof this.dimensionConstructor&&(t=this.dimensionConstructor),this.ndx.dimension(t,this.dimensionIsArray)}}},T=l.default({},void 0,j,void 0,void 0,void 0,!1,void 0,void 0,void 0),R={name:"GroupMixin",props:{reducer:{type:[String,Function,Object]},groupOptions:{type:Object}},methods:{createGroup:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e?t.groupAll():t.group();if(this.groupOptions&&this.groupOptions.order?"string"==typeof this.groupOptions.order?r.order((function(t){return t[i.groupOptions.order]})):"function"==typeof this.groupOptions.order&&r.order(this.groupOptions.order):this.groupOptions&&this.groupOptions.orderNatural&&r.orderNatural(),"string"==typeof this.reducer||"function"==typeof this.reducer)r.reduceSum(D(this.reducer));else if(this.reducer.add&&this.reducer.remove&&this.reducer.init){var n=this.reducer,s=n.add,o=n.remove,a=n.init;r.reduce(s,o,a)}return this.$emit("group-created",r),r},ordinalToLinear:function(t,i){var e,r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{top:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return n?Object.entries(t.value()).map((function(t){var i=x(t,2);return{key:i[0],value:i[1]}})).sort((function(t,e){return i(e.value)-i(t.value)})).slice(0,e):t.order((function(t){return i(t)})).top(e)},all:function(){var s=[];return s=n?Object.entries(t.value()).map((function(t){var i=x(t,2);return{key:i[0],value:i[1]}})).sort((function(t,e){return i(e.value)-i(t.value)})):t.order((function(t){return i(t)})).top(1/0),e={},r=[],s.forEach((function(t,i){e[t.key]=i,r[i]=t.key})),s},ord2int:function(t){return e||this.all(),e[t]},int2ord:function(t){return r||this.all(),r[t]}}}}},M=l.default({},void 0,R,void 0,void 0,void 0,!1,void 0,void 0,void 0),L={name:"DcBarChart",mixins:[S,T,M],defaultOptions:{elastic:!0,scrollable:!1,minScrollable:12,scrollHeight:12,mouseZoom:!0},data:function(){return{scaleChart:null,top:0}},methods:{createChart:function(){var t=this.computedOptions,i=t.elastic,e=t.scrollable,r=t.minScrollable,n=t.scrollHeight,s=t.groupAll,o=t.valueAccessor,a=t.label,c=t.filterFunction,h=t.mouseZoom;this.$options.dimension=this.createDimension();var u=D(o||function(t){return t}),l=this.ordinalToLinear(this.createGroup(this.$options.dimension,s),u,s);this.top=l.all().length;var d=[-.5,this.top-.5],p=this.top?document.querySelector("#chart-".concat(this._uid)).clientWidth/r/this.top:0;if(p=Math.max(Math.ceil(p),1),this.chart=new this.$dc.BarChart("#chart-".concat(this._uid)).dimension(this.$options.dimension).group(l).x(this.$d3.scaleLinear().domain(d)).xUnits(this.$dc.units.integers).centerBar(!0).brushOn(!1).gap(p),this.$super(S).createChart(),this.chart.keyAccessor((function(t){return l.ord2int(t.key)})),this.chart.valueAccessor((function(t){return u(t.value)})),this.chart.title(this.titleAccessor),this.chart.transitionDuration(this.canScroll?50:250),i&&this.chart.elasticY(!0),this.chart.xAxis().tickFormat((function(t){return D(a||function(t){return t})(l.int2ord(t))})),this.top<=r/4){var f=this.top||1;this.chart.barPadding(r/2/f)}var m=[];this.chart.filterHandler((function(t,i){})),this.chart.hasFilter=function(t){return Array.isArray(t)?t.every((function(t){return m.includes(t)})):t?m.includes(t):m.length},this.chart.applyFilter=function(){m.length?this.dimension().filterFunction((function(t){return c?c(m,t):m.includes(t)})):this.dimension().filter(null)},this.chart.filterAll=function(){m=[],this.applyFilter()};var v=this.$dc,g=this.$d3;if(this.chart.fadeDeselectedArea=function(t){var i=this.chartBodyG().selectAll("rect.bar");m.length?(i.classed(v.constants.SELECTED_CLASS,(function(t){return m.includes(t.data.key)})),i.classed(v.constants.DESELECTED_CLASS,(function(t){return!m.includes(t.data.key)}))):(i.classed(v.constants.SELECTED_CLASS,!1),i.classed(v.constants.DESELECTED_CLASS,!1))},this.chart.on("pretransition",(function(t){t.selectAll("rect.bar").on("click.ordinal-select",(function(i,e){var r=m.indexOf(e.data.key);r>=0?m.splice(r,1):m.push(e.data.key),t.applyFilter(),t.redrawGroup()}))})),this.chart.on("preRedraw",(function(t){var i=t.x().domain(),e=Math.ceil(i[0]),r=Math.floor(i[1]);t.xAxis().tickValues(g.range(e,r+1)),t.rescale()})),e){var y=this.computedMargins,b=y.top,x=y.bottom,C=y.left,O=y.right;this.chart.margins({top:0,bottom:x,left:C,right:O}),this.scaleChart=new this.$dc.BarChart("#chart-".concat(this._uid,"-range")).dimension(this.$options.dimension).group(l).height(n+b).margins({left:C,top:b,right:O-10,bottom:2}).x(this.$d3.scaleLinear().domain(d)).xUnits(this.$dc.units.integers).keyAccessor((function(t){return l.ord2int(t.key)})).centerBar(!0).valueAccessor((function(t){return u(t.value)})).brushOn(!0).transitionDuration(0),this.scaleChart.filterHandler((function(){})),this.scaleChart.yAxis().ticks(0),this.scaleChart.xAxis().ticks(0),this.chart.rangeChart(this.scaleChart),this.chart.zoomScale([Math.min(8,Math.ceil(this.top/12)),Math.min(this.top,12)]),i&&this.scaleChart.elasticY(!0),h&&this.chart.mouseZoomable(this.canScroll)}},render:function(){if(this.$super(S).render(),this.canScroll){var t;null===(t=this.scaleChart)||void 0===t||t.render();var i=Math.floor(this.top/Math.min(8,Math.ceil(this.top/12)));this.chart.focus([-1,i])}}},computed:{canScroll:function(){return this.computedOptions.scrollable&&this.top>=this.computedOptions.minScrollable}}},E=function(t){t&&t("data-v-5ea159a4_0",{source:".dc-chart-container.dc-scroll-bar-chart-container{position:relative;z-index:0}.dc-scroll-bar-chart-container .dc-bar-chart .axis.x .tick text{text-anchor:end;transform:rotate(-33deg) translate(-4px,-8px)}.dc-scroll-bar-chart-container .dc-scroll-bar-range .axis,.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler .axis,.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler.hidden,.dc-scroll-bar-chart-container .dc-scroll-bar-range.hidden{display:none}.dc-scroll-bar-chart-container .dc-scroll-bar-range{z-index:1;position:relative}.dc-scroll-bar-chart-container .dc-scroll-bar-range .custom-brush-handle{stroke:#000}.dc-scroll-bar-chart-container .dc-scroll-bar-range g.brush{fill:rgba(100,100,100,.1)}.dc-scroll-bar-chart-container .dc-scroll-bar-range svg{display:block}.dc-scroll-bar-chart-container .dc-scroll-bar-range-filler{height:12px}",map:void 0,media:void 0})},P=l.default({render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"dc-chart-container dc-scroll-bar-chart-container"},[t.computedOptions.scrollable?e("div",{staticStyle:{position:"relative","z-index":"0"}},[e("div",{staticClass:"dc-scroll-bar-range",class:{hidden:!t.canScroll},attrs:{id:"chart-"+t._uid+"-range"}}),t._v(" "),e("div",{staticClass:"dc-scroll-bar-range-filler",class:{hidden:t.canScroll}})]):t._e(),t._v(" "),e("div",{staticClass:"dc-chart dc-bar-chart",attrs:{id:"chart-"+t._uid}})])},staticRenderFns:[]},E,L,void 0,!1,void 0,!1,d.default,void 0,void 0),H={name:"DcChecklist",props:{chart:{type:[String,Object],required:!0},searchable:{type:Boolean,default:!0},search:{type:String,default:""},othersLimit:{type:Number},digits:{type:Number},maxHeight:{type:[String,Number],default:null},othersLabel:{type:String}},data:function(){return{groupFilter:"",groups:[],others:[],inFilter:[],waitInterval:null,waitingTimer:1}},mounted:function(){this.dcChart?this.reset():this.waitForChartInit(!0)},watch:{dcChart:function(t,i){this.reset()},search:function(){this.search!=this.groupFilter&&(this.groupFilter=this.search)}},filters:{formatFilter:function(t,i){return i||0===i?t.toFixed(i):t}},methods:{reset:function(){this.resetFilters(),this.updateListValues(),this.watchChartChanges()},resetFilters:function(){this.inFilter=Array.from(new Set(s.flat(this.dcChart.filters()))),this.groupFilter=""},updateListValues:function(){var t=this;this.groups=JSON.parse(JSON.stringify(this.dcChart.group().order((function(i){return t.valueAccessor({value:i})})).top(1/0))),this.options.slicesCap||this.othersLimit?this.others=this.groups.slice(this.options.slicesCap||this.othersLimit).map((function(t){return t.key})):this.others=[]},checkOthersFilterToggled:function(){var t=this,i=this.dcChart.filters(),e=this.othersLabel||this.options.othersLabel||"others",r=this.others.filter((function(e){return!i.includes(e)&&t.inFilter.includes(e)}));i.includes(e)&&r.length&&(i.push.apply(i,C(r)),this.inFilter=i,this.dcChart.replaceFilter([i]))},toggleFilterFor:function(t){var i=this;this.inFilter.includes(t)?this.inFilter=this.inFilter.filter((function(i){return i!==t})):this.inFilter.push(t),this.dcChart.replaceFilter([this.inFilter]),this.$nextTick((function(){return i.$dc.redrawAll()}))},updateSearch:function(){this.$emit("update:search",this.groupFilter),this.$emit("update-search",this.groupFilter)},watchChartChanges:function(){var t=this;this.dcChart.on("renderlet",(function(){t.updateListValues()})),this.dcChart.on("filtered",(function(){t.$nextTick((function(){t.checkOthersFilterToggled(),t.resetFilters(),t.updateListValues()}))}))},waitForChartInit:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.waitInterval=setInterval((function(){t.waitingTimer=(t.waitingTimer+1)%100+1,t.$nextTick((function(){t.dcChart&&(t.reset(),clearInterval(t.waitInterval),t.waitInterval=null)}))}),i?50:300)}},computed:{dcChart:function(){var t=this;return"string"==typeof this.chart&&this.waitingTimer?this.$dc.chartRegistry.list().find((function(i){return i.name===t.chart})):this.chart},shownGroups:function(){var t=this;return this.groupFilter&&this.groupFilter.length?this.groups.filter((function(i){return new RegExp(t.groupFilter,"gi").test(i.key)})):this.groups},valueAccessor:function(){return s.accessorFunc(this.options.valueAccessor||function(t){return t.value})},computedDigits:function(){return this.digits||0===this.digits?this.digits:this.options.digits},computedStyle:function(){var t=[];return this.maxHeight&&(t.push("overflow-y: auto"),"number"==typeof this.maxHeight?t.push("max-height: ".concat(this.maxHeight,"px")):t.push("max-height: ".concat(this.maxHeight))),t.join("; ")},options:function(){var t;return(null===(t=this.dcChart)||void 0===t?void 0:t.vueOptions)||{}}},beforeDestroy:function(){this.waitInterval&&clearInterval(this.waitInterval)}},I=function(t){t&&t("data-v-22e43388_0",{source:".dc-check-list-container{text-align:left;width:100%}.dc-check-list-container .dc-search-input-container .dc-search-input-label{display:block;font-weight:700;font-size:.85rem;margin-bottom:-.25rem}.dc-check-list-container .dc-search-input-container .dc-search-input{border-radius:.25rem;padding:.25rem;width:calc(100% - 1.25rem);border-color:#000}.dc-check-list-container .dc-checkbox-container .dc-checkbox{display:flex;align-items:center;cursor:pointer}.dc-check-list-container .dc-checkbox-container .dc-checkbox:nth-child(2n){background-color:#f5f5f5}.dc-check-list-container .dc-checkbox-container .dc-checkbox .dc-option-box{display:inline-block;width:1rem;height:1rem;border-radius:.25rem;margin:.25rem;border:2px solid #000}.dc-check-list-container .dc-checkbox-container .dc-checkbox .dc-option-box.selected{background-color:#388ce6}.dc-check-list-container .dc-checkbox-container .dc-checkbox:hover .dc-option-box{background-color:rgba(56,140,230,.25)}.dc-check-list-container .dc-checkbox-container .dc-checkbox:hover .dc-option-box.selected{background-color:rgba(56,140,230,.75)}",map:void 0,media:void 0})},N=l.default({render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"dc-check-list-container",style:t.computedStyle},[t._t("search",(function(){return[e("div",{staticClass:"dc-search-input-container"},[e("label",{staticClass:"dc-search-input-label",attrs:{for:".dc-search-input"}},[t._v("Search")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.groupFilter,expression:"groupFilter"}],staticClass:"dc-search-input",domProps:{value:t.groupFilter},on:{input:[function(i){i.target.composing||(t.groupFilter=i.target.value)},t.updateSearch]}})])]})),t._v(" "),e("div",{staticClass:"dc-checkbox-container"},t._l(t.shownGroups,(function(i){return e("div",{key:i.key,staticClass:"dc-checkbox",on:{click:function(e){return t.toggleFilterFor(i.key)}}},[t._t("option",(function(){return[e("span",{staticClass:"dc-option-box",class:{selected:t.inFilter.includes(i.key)}}),t._v(" "),e("span",{staticClass:"dc-option-label",class:{selected:t.inFilter.includes(i.key)}},[t._v("\n          "+t._s(i.key)+" ("+t._s(t._f("formatFilter")(i.value,t.computedDigits))+")\n        ")])]}),{option:i,value:t.inFilter.includes(i.key)})],2)})),0)],2)},staticRenderFns:[]},I,H,void 0,!1,void 0,!1,d.default,void 0,void 0),B={name:"DcDateChart",mixins:[S,T,M,$],defaultOptions:{elastic:!0,renderArea:!0,limitTicksToNumDays:!0,useD3TimeDay:!0,snapDateCalculation:!0,useUtcSnapping:!1},methods:{getDateBounds:function(){var t=D(this.computedOptions.keyAccessor||function(t){return t.date}),i=new Date(t(this.$options.dimension.top(1)[0])),e=new Date(t(this.$options.dimension.bottom(1)[0])),r=this.computedOptions,n=r.snapDateCalculation,s=r.useUtcSnapping;return n&&(s?(i.setUTCHours(0,0,0,0),e.setUTCHours(23,59,59,999)):(i.setHours(0,0,0,0),e.setHours(23,59,59,999))),{top:i,bottom:e,days:Math.ceil(Math.abs(this.daysDifference(i,e)))}},daysDifference:function(t,i){return t&&i&&t.getTime&&i.getTime?(i.getTime()-t.getTime())/1e3/60/60/24:null},createDimension:function(){var t=this,i=this.computedOptions.useD3TimeDay,e=function(i){return t.$d3.timeDay(new Date(i))},r=i?function(i){return e(t.$dc.pluck("date")(i))}:dc.pluck("date");return"string"==typeof this.dimensionConstructor?r=i?function(i){return e(t.$dc.pluck(t.dimensionConstructor)(i))}:dc.pluck(this.dimensionConstructor):"function"==typeof this.dimensionConstructor&&(r=this.dimensionConstructor),this.ndx.dimension(r,this.dimensionIsArray)},createChart:function(){var t=this.computedOptions,i=t.elastic,e=t.renderArea;this.$options.dimension=this.createDimension();var r=this.createGroup(this.$options.dimension),n=this.getDateBounds(),s=n.top,o=n.bottom,a=n.days;if(this.chart=new this.$dc.LineChart("#chart-".concat(this._uid)).dimension(this.$options.dimension).group(r).x(this.$d3.scaleTime().domain([o,s])),this.$super(S).createChart(),this.applyAxisOptions(),i&&this.chart.elasticY(!0),e&&this.chart.renderArea(!0),this.computedOptions.limitTicksToNumDays){var c,h=(null===(c=this.computedAxisOptions.x)||void 0===c?void 0:c.ticks)||10;this.chart.xAxis().ticks(Math.min(h,a))}}}},q=l.default({render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"dc-chart-container dc-date-chart-container"},[i("div",{staticClass:"dc-chart dc-date-chart",attrs:{id:"chart-"+this._uid}})])},staticRenderFns:[]},void 0,B,void 0,!1,void 0,!1,void 0,void 0,void 0),z={name:"DcPieChart",mixins:[S,T,M],defaultOptions:{minRadius:0,maxRadius:1/0,innerRadius:0,slicesCap:10,othersLabel:"others",useImprovedLabels:!0,labelWrapSeparator:";|;"},methods:{createChart:function(){var t=this;this.$options.dimension=this.createDimension();var i=this.createGroup(this.$options.dimension);this.chart=new this.$dc.PieChart("#chart-".concat(this._uid)).dimension(this.$options.dimension).group(i).externalRadiusPadding(12),this.$super(S).createChart();var e=this.getRadius();this.chart.radius(e),this.chart.width(e),this.chart.height(e);var r=this.computedOptions,n=r.innerRadius,s=r.slicesCap,o=r.othersLabel,a=r.useImprovedLabels;if(s&&this.chart.slicesCap(s),o&&this.chart.othersLabel(o),n){var c="number"==typeof n?n:e*(parseInt(n)||0)/100;this.chart.innerRadius(c)}if(a){var h=function(i){var e=t.$d3,r=t.computedOptions.labelWrapSeparator;i.each((function(){var t=e.select(this),i=t.text().split(r);if(i&&!(i.length<2)){var n=t.attr("transform"),s=parseFloat(n.slice(n.indexOf("translate(")+10,n.indexOf(","))),o=parseFloat(n.slice(n.indexOf(",")+1,n.indexOf(")")));if(Number.isNaN(s)||Number.isNaN(o))console.warn("unable to wrap text",n,s,o,n.slice(n.indexOf("translate(")+10,n.indexOf(",")));else{var a=t.text(null).append("tspan").attr("transform","translate(".concat(s,", ").concat(o,")")).attr("x",0).attr("y",0);a.text(i[0]),(a=t.append("tspan").attr("transform","translate(".concat(s,", ").concat(o,")")).attr("x",0).attr("y",14)).text("(".concat(i[1].replace(/[^0-9\-.]/g,""),")"))}}}))},u=function(){t.chart.selectAll("text.pie-label").attr("transform",(function(i,e){var r=function(t,i){var e=i.centroid(t);return e.some((function(t){return isNaN(t)}))?[0,0]:e}(i,function(){var i=Math.min(t.chart.width(),t.chart.height())/1.8,e=Math.min(t.chart.radius(),i);return t.$d3.arc().outerRadius(e).innerRadius(t.chart.innerRadius())}(t.chart)),n=(e+1)/6+.3;return r[1]<0&&(n=1),"translate(".concat(r[0],", ").concat(r[1]*n,")")})),t.chart.selectAll(".pie-label-group text.pie-label").transition().call(h)};this.chart.on("renderlet",(function(i){var e=t.getRadius();t.chart.radius()!==e&&(t.chart.height(e),t.chart.width(e),t.chart.redraw()),u()})),this.chart.on("pretransition",u)}},renderChart:function(){var t=this;return new Promise((function(i){t.$super(S).renderChart().then((function(){t.$nextTick((function(){return t.computedOptions.useImprovedLabels&&t.chart.redraw(),i()}))}))}))},getRadius:function(){var t=document.querySelector("#chart-".concat(this._uid));if(!t)return 0;var i=t.clientWidth,e=this.computedOptions;return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(i,Math.min(t,e))}(i,e.minRadius,e.maxRadius)}}},G=function(t){t&&t("data-v-4035cc8e_0",{source:".dc-chart.dc-pie-chart .pie-slice:hover{fill-opacity:.8}",map:void 0,media:void 0})},V=l.default({render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"dc-chart-container"},[i("div",{staticClass:"dc-chart dc-pie-chart",attrs:{id:"chart-"+this._uid}})])},staticRenderFns:[]},G,z,void 0,!1,void 0,!1,d.default,void 0,void 0),U={name:"DcRowChart",mixins:[S,T,M],defaultOptions:{elastic:!0,scrollable:!0,minHeight:150,barHeight:20,axisChartheight:50,scrollHeight:"200px",scrollbarPadding:8},data:function(){return{axisChart:null}},methods:{createChart:function(){var t=this.computedOptions,i=t.elastic,e=t.scrollable,r=t.minHeight,n=t.barHeight,s=t.axisChartHeight,o=t.valueAccessor,a=t.keyAccessor;this.$options.dimension=this.createDimension();var c=this.createGroup(this.$options.dimension);this.chart=new this.$dc.RowChart("#chart-".concat(this._uid)).dimension(this.$options.dimension).group(c),this.$super(S).createChart();var h=e?Object.assign({},this.computedMargins,{bottom:-1}):this.computedMargins;if(this.chart.margins(h),i&&this.chart.elasticX(!0),e){this.chart.height(Math.max(r,c.size()*n)),this.chart.transitionDuration(1e3);var u=Object.assign({},this.computedMargins,{top:0});this.axisChart=new this.$dc.AxisChart("#chart-".concat(this._uid,"-axis")).dimension(this.$options.dimension).group(c).height(s).margins(u),o&&this.axisChart.valueAccessor(D(o)),a&&this.axisChart.keyAccessor(D(a)),i&&this.axisChart.elastic(!0)}},render:function(){var t;this.$super(S).render(),null===(t=this.axisChart)||void 0===t||t.render()}},computed:{computedStyle:function(){var t=[];return this.computedOptions.scrollable&&(t.push("overflow-y: auto; overflow-x: hidden;"),this.computedOptions.scrollHeight&&t.push("max-height: ".concat(this.computedOptions.scrollHeight))),t.join("; ")},computedMargins:function(){var t,i,e=Object.assign({top:30,right:30,bottom:30,left:30},null===(t=this.$options.defaultOptions)||void 0===t?void 0:t.margins,null===(i=this.options)||void 0===i?void 0:i.margins),r=this.computedOptions,n=r.scrollable,s=r.scrollbarPadding;return n&&s&&(e.right+=s),e}}},W=l.default({render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"dc-chart-container dc-row-chart-container"},[i("div",{staticClass:"dc-chart dc-row-chart",style:this.computedStyle,attrs:{id:"chart-"+this._uid}}),this._v(" "),this.computedOptions.scrollable?i("div",{staticClass:"dc-chart dc-axis-chart dc-row-axis-chart",attrs:{id:"chart-"+this._uid+"-axis"}}):this._e()])},staticRenderFns:[]},void 0,U,void 0,!1,void 0,!1,void 0,void 0,void 0),Y={registerComponents:!0},Z={install:function(t,i){var e=Object.assign({},Y,e);t.prototype.$super=function(t){var i=this;return new Proxy(t,{get:function(t,e){if(t.methods&&e in t.methods)return t.methods[e].bind(i)}})},t.use(w,e),e.registerComponents&&(t.component("dc-bar-chart",P),t.component("dc-checklist",N),t.component("dc-date-chart",q),t.component("dc-row-chart",W),t.component("dc-pie-chart",V))}};exports.dc=c,exports.d3=h,Object.defineProperty(exports,"crossfilter",{enumerable:!0,get:function(){return u.default}}),exports.DcBarChart=P,exports.DcChecklist=N,exports.DcDateChart=q,exports.DcPieChart=V,exports.DcRowChart=W,exports.VueDc=Z;
//# sourceMappingURL=index.js.map
